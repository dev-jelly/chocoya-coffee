(()=>{var e={};e.id=4859,e.ids=[4859],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9699:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(41253);let o=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23025:(e,r,s)=>{"use strict";s.d(r,{p:()=>i});var t=s(13486),o=s(60159),a=s(26518);let i=o.forwardRef(({className:e,type:r,...s},o)=>(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...s}));i.displayName="Input"},27910:e=>{"use strict";e.exports=require("stream")},27933:(e,r,s)=>{"use strict";s.d(r,{LoginForm:()=>t});let t=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call LoginForm() from the server but LoginForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/components/auth/login-form.tsx","LoginForm")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32630:(e,r,s)=>{"use strict";s.d(r,{LoginForm:()=>z});var t=s(13486),o=s(60159),a=s(85626),i=s(85519),n=s(2984),l=s(74941),c=s(90691),d=s(26518),u=s(41571);let m=a.Op,p=o.createContext({}),x=({...e})=>(0,t.jsx)(p.Provider,{value:{name:e.name},children:(0,t.jsx)(a.xI,{...e})}),f=()=>{let e=o.useContext(p),r=o.useContext(h),{getFieldState:s}=(0,a.xW)(),t=(0,a.lN)({name:e.name}),i=s(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...i}},h=o.createContext({});function g({className:e,...r}){let s=o.useId();return(0,t.jsx)(h.Provider,{value:{id:s},children:(0,t.jsx)("div",{"data-slot":"form-item",className:(0,d.cn)("grid gap-2",e),...r})})}function b({className:e,...r}){let{error:s,formItemId:o}=f();return(0,t.jsx)(u.J,{"data-slot":"form-label","data-error":!!s,className:(0,d.cn)("data-[error=true]:text-destructive-foreground",e),htmlFor:o,...r})}function v({...e}){let{error:r,formItemId:s,formDescriptionId:o,formMessageId:a}=f();return(0,t.jsx)(c.DX,{"data-slot":"form-control",id:s,"aria-describedby":r?`${o} ${a}`:`${o}`,"aria-invalid":!!r,...e})}function w({className:e,...r}){let{error:s,formMessageId:o}=f(),a=s?String(s?.message??""):r.children;return a?(0,t.jsx)("p",{"data-slot":"form-message",id:o,className:(0,d.cn)("text-destructive-foreground text-sm",e),...r,children:a}):null}var j=s(23025),y=s(81604),A=s(49989),C=s.n(A),P=s(98509);let N=P.z.object({email:P.z.string().email("유효한 이메일 주소를 입력해주세요."),password:P.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다.")});P.z.object({name:P.z.string().min(2,"이름은 최소 2자 이상이어야 합니다."),email:P.z.string().email("유효한 이메일 주소를 입력해주세요."),password:P.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:P.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}).refine(e=>e.password===e.confirmPassword,{message:"비밀번호가 일치하지 않습니다.",path:["confirmPassword"]}),P.z.object({currentPassword:P.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),newPassword:P.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmNewPassword:P.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}).refine(e=>e.newPassword===e.confirmNewPassword,{message:"새 비밀번호가 일치하지 않습니다.",path:["confirmNewPassword"]});var k=s(70593),q=s(54791);function z(){let e=(0,n.useRouter)(),[r,s]=(0,o.useState)(!1),c=(0,a.mN)({resolver:(0,i.u)(N),defaultValues:{email:"",password:""}});async function d(r){s(!0);try{let s=await (0,k.Ru)(r.email,r.password);if(s.success){if(s.data?.user)try{let e=await fetch(`/api/users/${s.data.user.id}`,{method:"GET"});404===e.status&&(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.data.user.id,name:s.data.user.email?.split("@")[0]||"사용자",email:s.data.user.email})}),console.log("로그인 후 누락된 사용자 프로필 생성 완료"))}catch(e){console.error("사용자 프로필 확인/생성 오류:",e)}e.push("/"),e.refresh(),y.oR.success("로그인되었습니다.")}else y.oR.error(s.error||"로그인에 실패했습니다."),s.error?.includes("이메일 또는 비밀번호가 올바르지 않습니다")&&(c.setError("email",{message:"이메일 또는 비밀번호를 확인해주세요"}),c.setError("password",{message:"이메일 또는 비밀번호를 확인해주세요"}))}catch(e){console.error("로그인 오류:",e),y.oR.error("로그인 중 예상치 못한 오류가 발생했습니다. 다시 시도해주세요.")}finally{s(!1)}}async function u(e){s(!0);try{let r=await (0,k.cU)(e);r.success&&r.data?r.data.url?window.location.href=r.data.url:(y.oR.error(`${e} 로그인 URL을 가져오는데 실패했습니다.`),s(!1)):(y.oR.error(r.error||`${e} 로그인에 실패했습니다.`),s(!1))}catch(r){console.error(`${e} 로그인 오류:`,r),y.oR.error(`${e} 로그인 중 예상치 못한 오류가 발생했습니다. 다시 시도해주세요.`),s(!1)}}return(0,t.jsxs)("div",{className:"grid gap-6",children:[(0,t.jsx)(m,{...c,children:(0,t.jsxs)("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[(0,t.jsx)(x,{control:c.control,name:"email",render:({field:e})=>(0,t.jsxs)(g,{children:[(0,t.jsx)(b,{children:"이메일"}),(0,t.jsx)(v,{children:(0,t.jsx)(j.p,{placeholder:"name@example.com",...e})}),(0,t.jsx)(w,{})]})}),(0,t.jsx)(x,{control:c.control,name:"password",render:({field:e})=>(0,t.jsxs)(g,{children:[(0,t.jsx)(b,{children:"비밀번호"}),(0,t.jsx)(v,{children:(0,t.jsx)(j.p,{type:"password",placeholder:"••••••••",...e})}),(0,t.jsx)(w,{})]})}),(0,t.jsx)(l.$,{type:"submit",className:"w-full",disabled:r,children:r?"로그인 중...":"로그인"})]})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("span",{className:"w-full border-t"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,t.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"또는 소셜 로그인"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)(l.$,{variant:"outline",type:"button",disabled:r,onClick:()=>u("kakao"),className:"bg-[#FEE500] text-black hover:bg-[#FDD835] hover:text-black",children:[(0,t.jsx)(q.F.kakao,{className:"mr-2 h-4 w-4"}),"카카오"]}),(0,t.jsxs)(l.$,{variant:"outline",type:"button",disabled:r,onClick:()=>u("google"),children:[(0,t.jsx)(q.F.google,{className:"mr-2 h-4 w-4"}),"Google"]})]}),(0,t.jsxs)("div",{className:"text-center text-sm",children:["계정이 없으신가요?"," ",(0,t.jsx)(C(),{href:"/auth/register",className:"underline",children:"회원가입"})]})]})}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37349:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i,metadata:()=>a});var t=s(38828),o=s(27933);let a={title:"로그인 - 초코야 커피",description:"초코야 커피에 로그인하세요."};function i(){return(0,t.jsx)("div",{className:"container flex h-screen w-screen flex-col items-center justify-center",children:(0,t.jsxs)("div",{className:"mx-auto flex w-full flex-col justify-center space-y-6 sm:w-[350px]",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"로그인"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"이메일과 비밀번호를 입력하여 로그인하세요."})]}),(0,t.jsx)(o.LoginForm,{})]})})}},41571:(e,r,s)=>{"use strict";s.d(r,{J:()=>i});var t=s(13486),o=s(60159),a=s(26518);let i=o.forwardRef(({className:e,...r},s)=>(0,t.jsx)("label",{ref:s,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...r}));i.displayName="Label"},54791:(e,r,s)=>{"use strict";s.d(r,{F:()=>S});var t=s(13486),o=s(58499),a=s(1039),i=s(15577),n=s(4984),l=s(43967),c=s(70393),d=s(34606),u=s(57956),m=s(74439),p=s(92816),x=s(31461),f=s(48175),h=s(5085),g=s(34321),b=s(97490),v=s(8843),w=s(73120),j=s(45576),y=s(49391),A=s(70087),C=s(69),P=s(14926),N=s(97493),k=s(72513),q=s(39146),z=s(95499),F=s(23365),R=s(5860),_=s(17089),$=s(83991),E=s(28963),L=s(6119),M=s(45831),G=s(98398),I=s(27746);let S={logo:o.A,close:a.A,spinner:i.A,chevronLeft:n.A,chevronRight:l.A,trash:c.A,settings:d.A,user:u.A,add:m.A,warning:p.A,arrowRight:x.A,help:f.A,pizza:h.A,sun:g.A,moon:b.A,laptop:v.A,gitHub:w.A,twitter:j.A,check:y.A,more:A.A,page:C.A,media:P.A,billing:N.A,ellipsis:A.A,post:k.A,command:q.A,coffee:o.A,temperature:z.A,time:F.A,water:R.A,weight:_.A,star:$.A,heart:E.A,bookmark:L.A,share:M.A,comment:G.A,like:I.A,google:({...e})=>(0,t.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})}),kakao:({...e})=>(0,t.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M12 3C6.477 3 2 6.477 2 10.8C2 13.7083 3.79167 16.2417 6.33333 17.7333L5.58333 21.1C5.54167 21.2667 5.59167 21.4417 5.71667 21.55C5.8 21.6333 5.91667 21.6667 6.03333 21.6667C6.13333 21.6667 6.23333 21.6333 6.31667 21.575L10.175 19.125C10.775 19.2083 11.3833 19.25 12 19.25C17.5229 19.25 22 15.7735 22 11.45C22 7.12649 17.5229 3.65 12 3.65V3ZM7.5 12.5C6.67157 12.5 6 11.8284 6 11C6 10.1716 6.67157 9.5 7.5 9.5C8.32843 9.5 9 10.1716 9 11C9 11.8284 8.32843 12.5 7.5 12.5ZM12 12.5C11.1716 12.5 10.5 11.8284 10.5 11C10.5 10.1716 11.1716 9.5 12 9.5C12.8284 9.5 13.5 10.1716 13.5 11C13.5 11.8284 12.8284 12.5 12 12.5ZM16.5 12.5C15.6716 12.5 15 11.8284 15 11C15 10.1716 15.6716 9.5 16.5 9.5C17.3284 9.5 18 10.1716 18 11C18 11.8284 17.3284 12.5 16.5 12.5Z",fill:"currentColor"})})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63202:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>a.default,__next_app__:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>l});var t=s(24332),o=s(48819),a=s(84423),i=s(97540),n={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(r,n);let l={children:["",{children:["auth",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,37349)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/auth/login/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,5910)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,80765)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/error.tsx"],"global-error":[()=>Promise.resolve().then(s.bind(s,84423)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/auth/login/page.tsx"],d={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/auth/login/page",pathname:"/auth/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79529:(e,r,s)=>{Promise.resolve().then(s.bind(s,32630))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},89257:(e,r,s)=>{Promise.resolve().then(s.bind(s,27933))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[191,3395,5208,3796,4058,1253,7759,7949,856],()=>s(63202));module.exports=t})();