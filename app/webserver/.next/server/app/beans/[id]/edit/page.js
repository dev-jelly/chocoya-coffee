"use strict";(()=>{var e={};e.id=9617,e.ids=[9617],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{e.exports=require("punycode")},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{e.exports=require("stream")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},34631:e=>{e.exports=require("tls")},36080:(e,r,t)=>{t.r(r),t.d(r,{"400f848ca9c3d3c5e2201c08bc803edee6521b5888":()=>a.NH,"4035cbe8ce0687cf0aad1bc64c9fe95bf4ef4b66df":()=>a.JQ,"40dd756df4f8233e05d1907947a699d86659ad0e72":()=>a.y7,"60f44d3f410dbeca9194c741272be48515606c7c1d":()=>a.IV,"7094e3ba894d8125ad170d6181026c57ac27925c57":()=>a.JV,"7814bbd4645cf52ef71e339537b3bdfc20cb9aed38":()=>a.wI});var a=t(78583)},42538:(e,r,t)=>{t.r(r),t.d(r,{GlobalError:()=>o.default,__next_app__:()=>d,pages:()=>l,routeModule:()=>u,tree:()=>c});var a=t(24332),s=t(48819),o=t(84423),n=t(97540),i={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(r,i);let c={children:["",{children:["beans",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,81337)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/beans/[id]/edit/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,5910)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,80765)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/error.tsx"],"global-error":[()=>Promise.resolve().then(t.bind(t,84423)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/beans/[id]/edit/page.tsx"],d={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/beans/[id]/edit/page",pathname:"/beans/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},49391:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(84667).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70358:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{callServer:function(){return a.callServer},createServerReference:function(){return o},findSourceMapURL:function(){return s.findSourceMapURL}});let a=t(77993),s=t(81653),o=t(59498).createServerReference},74075:e=>{e.exports=require("zlib")},78583:(e,r,t)=>{t.d(r,{IV:()=>b,JQ:()=>p,JV:()=>l,NH:()=>u,wI:()=>f,y7:()=>d});var a=t(10841);t(10935);var s=t(30194),o=t(44627),n=t(16151),i=t(52943);let c=n.z.object({name:n.z.string().min(1,"원두 이름은 필수입니다"),origin:n.z.string().optional(),region:n.z.string().optional(),farm:n.z.string().optional(),altitude:n.z.string().optional(),process:n.z.string().optional(),variety:n.z.string().optional(),roastLevel:n.z.string().optional(),roaster:n.z.string().optional(),description:n.z.string().optional(),isPublic:n.z.boolean().default(!0),flavorNotes:n.z.string().optional(),flavorLabels:n.z.string().optional(),flavorColors:n.z.string().optional(),primaryColor:n.z.string().optional()});async function l(e,r,t){let a=c.safeParse({name:t.get("name"),origin:t.get("origin"),region:t.get("region"),farm:t.get("farm"),altitude:t.get("altitude"),process:t.get("process"),variety:t.get("variety"),roastLevel:t.get("roastLevel"),roaster:t.get("roaster"),description:t.get("description"),isPublic:"true"===t.get("isPublic"),flavorNotes:t.get("flavorNotes"),flavorLabels:t.get("flavorLabels"),flavorColors:t.get("flavorColors"),primaryColor:t.get("primaryColor")});if(!a.success)return{errors:a.error.flatten().fieldErrors,message:"입력 정보를 확인해주세요."};let{name:n,origin:i,region:l,farm:d,altitude:u,process:p,variety:f,roastLevel:b,roaster:m,description:g,isPublic:v,flavorNotes:h,flavorLabels:x,flavorColors:y,primaryColor:w}=a.data;try{return await o.zR.bean.create({data:{name:n,origin:i,region:l,farm:d,altitude:u,process:p,variety:f,roastLevel:b,roaster:m,description:g,isPublic:v,flavorNotes:h,flavorLabels:x,flavorColors:y,primaryColor:w,userId:e}}),(0,s.revalidatePath)("/beans"),{message:"원두 정보가 성공적으로 등록되었습니다."}}catch(e){return console.error("원두 등록 오류:",e),{errors:{_form:["원두 등록 중 오류가 발생했습니다. 다시 시도해주세요."]}}}}async function d(e){try{return await o.zR.bean.findMany({where:{isPublic:!0,...e?{OR:[{name:{contains:e}},{origin:{contains:e}},{roaster:{contains:e}}]}:{}},include:{user:{select:{name:!0}}},orderBy:{createdAt:"desc"}})}catch(e){return console.error("원두 목록 조회 오류:",e),[]}}async function u(e){try{return await o.zR.bean.findMany({where:{userId:e},orderBy:{createdAt:"desc"}})}catch(e){return console.error("사용자 원두 목록 조회 오류:",e),[]}}async function p(e){try{return await o.zR.bean.findUnique({where:{id:e},include:{user:{select:{name:!0}},recipes:{include:{user:{select:{name:!0}}},orderBy:{createdAt:"desc"},take:5},tasteNotes:{include:{user:{select:{name:!0}}},orderBy:{createdAt:"desc"},take:5}}})}catch(e){return console.error("원두 상세 조회 오류:",e),null}}async function f(e,r,t,a){let n=c.safeParse({name:a.get("name"),origin:a.get("origin"),region:a.get("region"),farm:a.get("farm"),altitude:a.get("altitude"),process:a.get("process"),variety:a.get("variety"),roastLevel:a.get("roastLevel"),roaster:a.get("roaster"),description:a.get("description"),isPublic:"true"===a.get("isPublic"),flavorNotes:a.get("flavorNotes"),flavorLabels:a.get("flavorLabels"),flavorColors:a.get("flavorColors"),primaryColor:a.get("primaryColor")});if(!n.success)return{errors:n.error.flatten().fieldErrors,message:"입력 정보를 확인해주세요."};let i=await o.zR.bean.findUnique({where:{id:e},select:{userId:!0}});if(!i||i.userId!==r)return{errors:{_form:["원두 정보를 수정할 권한이 없습니다."]}};let{name:l,origin:d,region:u,farm:p,altitude:f,process:b,variety:m,roastLevel:g,roaster:v,description:h,isPublic:x,flavorNotes:y,flavorLabels:w,flavorColors:P,primaryColor:j}=n.data;try{return await o.zR.bean.update({where:{id:e},data:{name:l,origin:d,region:u,farm:p,altitude:f,process:b,variety:m,roastLevel:g,roaster:v,description:h,isPublic:x,flavorNotes:y,flavorLabels:w,flavorColors:P,primaryColor:j}}),(0,s.revalidatePath)(`/beans/${e}`),{message:"원두 정보가 성공적으로 수정되었습니다."}}catch(e){return console.error("원두 수정 오류:",e),{errors:{_form:["원두 수정 중 오류가 발생했습니다. 다시 시도해주세요."]}}}}async function b(e,r){try{let t=await o.zR.bean.findUnique({where:{id:e},select:{userId:!0}});if(!t||t.userId!==r)return{success:!1,message:"원두 정보를 삭제할 권한이 없습니다."};return await o.zR.bean.delete({where:{id:e}}),(0,s.revalidatePath)("/beans"),{success:!0,message:"원두 정보가 성공적으로 삭제되었습니다."}}catch(e){return console.error("원두 삭제 오류:",e),{success:!1,message:"원두 삭제 중 오류가 발생했습니다. 다시 시도해주세요."}}}(0,i.D)([l,d,u,p,f,b]),(0,a.A)(l,"7094e3ba894d8125ad170d6181026c57ac27925c57",null),(0,a.A)(d,"40dd756df4f8233e05d1907947a699d86659ad0e72",null),(0,a.A)(u,"400f848ca9c3d3c5e2201c08bc803edee6521b5888",null),(0,a.A)(p,"4035cbe8ce0687cf0aad1bc64c9fe95bf4ef4b66df",null),(0,a.A)(f,"7814bbd4645cf52ef71e339537b3bdfc20cb9aed38",null),(0,a.A)(b,"60f44d3f410dbeca9194c741272be48515606c7c1d",null)},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},81337:(e,r,t)=>{t.r(r),t.d(r,{default:()=>f,metadata:()=>p});var a=t(38828);t(61365);var s=t(42671),o=t.n(s),n=t(78443),i=t(78631),c=t(42543),l=t(63550),d=t(78583),u=t(84875);let p={title:"원두 정보 수정 | 초코야 커피",description:"등록한 원두 정보를 수정하세요"};async function f({params:e}){let r=await (0,u.U)(),{data:{user:t}}=await r.auth.getUser();t?.id||(0,c.redirect)(`/auth/login?callbackUrl=/beans/${e.id}/edit`);let s=await (0,d.JQ)(e.id);return s||(0,c.notFound)(),s.userId!==t.id&&(0,c.redirect)(`/beans/${e.id}`),(0,a.jsxs)("div",{className:"container mx-auto py-10",children:[(0,a.jsxs)(o(),{href:`/beans/${e.id}`,className:"text-primary hover:underline flex items-center mb-6",children:[(0,a.jsx)(n.A,{className:"mr-2",size:16}),"원두 상세 페이지로 돌아가기"]}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center",children:[(0,a.jsx)(i.A,{className:"mr-2"}),"원두 정보 수정하기"]})}),(0,a.jsx)("div",{className:"bg-card p-6 rounded-lg shadow-md mb-6",children:(0,a.jsx)(l.default,{userId:t.id,bean:s,isEditing:!0})})]})]})}},81630:e=>{e.exports=require("http")},91645:e=>{e.exports=require("net")},94735:e=>{e.exports=require("events")},96330:e=>{e.exports=require("@prisma/client")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[191,3395,5208,3796,4058,1253,1344,6151,7102,856,4179,8461],()=>t(42538));module.exports=a})();