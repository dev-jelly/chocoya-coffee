(()=>{var e={};e.id=3090,e.ids=[3090],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3798:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>f,metadata:()=>p});var t=a(38828);a(61365);var s=a(42671),i=a.n(s),n=a(78631),o=a(20065),c=a(44237),d=a(78583),l=a(84875),m=a(67745),u=a(43128);let p={title:"원두 라이브러리 | 초코야 커피",description:"다양한 원두 정보를 찾아보고, 나만의 원두 정보를 공유하세요"};async function f(e){let r=e.searchParams||{},a=await (0,l.U)(),{data:{user:s}}=await a.auth.getUser(),p=s?.id,f={...r}.search||"",b=await (0,d.y7)(f);return(0,t.jsxs)("div",{className:"container px-4 md:px-6 py-6 md:py-10",children:[(0,t.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4",children:[(0,t.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold flex items-center",children:[(0,t.jsx)(n.A,{className:"mr-2"}),"원두 라이브러리"]}),p&&(0,t.jsxs)(i(),{href:"/beans/create",className:"inline-flex items-center justify-center px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(o.A,{size:16,className:"mr-1"}),"원두 등록하기"]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("form",{action:"/beans",method:"GET",className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-grow",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(c.A,{size:16,className:"text-muted-foreground"})}),(0,t.jsx)("input",{type:"text",name:"search",defaultValue:f,placeholder:"원두 이름, 원산지, 로스터리 등으로 검색",className:"w-full p-3 pl-10 rounded-md border border-input bg-background"})]}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 transition-colors",children:"검색"})]})}),0===b.length?(0,t.jsxs)("div",{className:"bg-card border rounded-lg p-8 text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"등록된 원두가 없습니다"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:f?`'${f}' 검색 결과가 없습니다.`:"아직 등록된 원두 정보가 없습니다."}),p&&(0,t.jsx)(i(),{href:"/beans/create",className:"inline-flex items-center justify-center px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"첫 번째 원두 등록하기"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:b.map(e=>(0,t.jsx)(i(),{href:`/beans/${e.id}`,passHref:!0,children:(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden hover:shadow-lg transition-shadow cursor-pointer bg-card",children:(0,t.jsxs)("div",{className:"p-4 md:p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-2 flex items-center",children:[(0,t.jsx)(n.A,{className:"mr-2 h-5 w-5"}),e.name]}),(0,t.jsxs)("div",{className:"flex flex-col space-y-1 text-sm text-muted-foreground mb-4",children:[e.origin&&(0,t.jsxs)("span",{children:["원산지: ",(0,m.c4)(e.origin)]}),e.roastLevel&&(0,t.jsxs)("span",{children:["로스팅: ",e.roastLevel]}),e.roaster&&(0,t.jsxs)("span",{children:["로스터리: ",e.roaster]}),e.process&&(0,t.jsxs)("span",{children:["프로세스: ",e.process]})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"mt-4 flex justify-between items-center text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["작성자: ",e.user?.name||"익명"]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:(0,u.o)(e.createdAt)})]})]})})},e.id))})]})}},9699:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});var t=a(41253);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},9708:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,42671,23))},10732:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.default,__next_app__:()=>l,pages:()=>d,routeModule:()=>m,tree:()=>c});var t=a(24332),s=a(48819),i=a(84423),n=a(97540),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(r,o);let c={children:["",{children:["beans",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3798)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/beans/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,5910)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,80765)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/error.tsx"],"global-error":[()=>Promise.resolve().then(a.bind(a,84423)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/beans/page.tsx"],l={require:a,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/beans/page",pathname:"/beans",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},15788:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,49989,23))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20065:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(68366).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36080:(e,r,a)=>{"use strict";a.r(r),a.d(r,{"400f848ca9c3d3c5e2201c08bc803edee6521b5888":()=>t.NH,"4035cbe8ce0687cf0aad1bc64c9fe95bf4ef4b66df":()=>t.JQ,"40dd756df4f8233e05d1907947a699d86659ad0e72":()=>t.y7,"60f44d3f410dbeca9194c741272be48515606c7c1d":()=>t.IV,"7094e3ba894d8125ad170d6181026c57ac27925c57":()=>t.JV,"7814bbd4645cf52ef71e339537b3bdfc20cb9aed38":()=>t.wI});var t=a(78583)},44237:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(68366).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67745:(e,r,a)=>{"use strict";a.d(r,{c4:()=>s});let t=[{id:"ethiopia",name:"에티오피아",major:!0},{id:"kenya",name:"케냐",major:!0},{id:"colombia",name:"콜롬비아",major:!0},{id:"guatemala",name:"과테말라",major:!0},{id:"panama",name:"파나마",major:!0},{id:"costa_rica",name:"코스타리카",major:!0},{id:"rwanda",name:"르완다",major:!0},{id:"el_salvador",name:"엘살바도르",major:!0},{id:"nicaragua",name:"니카라과",major:!0},{id:"honduras",name:"온두라스",major:!0},{id:"burundi",name:"부룬디",major:!0},{id:"yemen",name:"예멘",major:!0},{id:"tanzania",name:"탄자니아",major:!0},{id:"peru",name:"페루",major:!0},{id:"brazil",name:"브라질",major:!1},{id:"vietnam",name:"베트남",major:!1},{id:"indonesia",name:"인도네시아",major:!1},{id:"india",name:"인도",major:!1},{id:"uganda",name:"우간다",major:!1},{id:"mexico",name:"멕시코",major:!1},{id:"ecuador",name:"에콰도르",major:!1},{id:"papua_new_guinea",name:"파푸아뉴기니",major:!1},{id:"jamaica",name:"자메이카",major:!1},{id:"thailand",name:"태국",major:!1},{id:"laos",name:"라오스",major:!1},{id:"china",name:"중국",major:!1},{id:"dominican_republic",name:"도미니카 공화국",major:!1},{id:"cuba",name:"쿠바",major:!1},{id:"haiti",name:"아이티",major:!1},{id:"bolivia",name:"볼리비아",major:!1}],s=e=>{if(!e)return"";let r=t.find(r=>r.id===e);return r?r.name:""}},74075:e=>{"use strict";e.exports=require("zlib")},78583:(e,r,a)=>{"use strict";a.d(r,{IV:()=>f,JQ:()=>u,JV:()=>d,NH:()=>m,wI:()=>p,y7:()=>l});var t=a(10841);a(10935);var s=a(30194),i=a(44627),n=a(16151),o=a(52943);let c=n.z.object({name:n.z.string().min(1,"원두 이름은 필수입니다"),origin:n.z.string().optional(),region:n.z.string().optional(),farm:n.z.string().optional(),altitude:n.z.string().optional(),process:n.z.string().optional(),variety:n.z.string().optional(),roastLevel:n.z.string().optional(),roaster:n.z.string().optional(),description:n.z.string().optional(),isPublic:n.z.boolean().default(!0),flavorNotes:n.z.string().optional(),flavorLabels:n.z.string().optional(),flavorColors:n.z.string().optional(),primaryColor:n.z.string().optional()});async function d(e,r,a){let t=c.safeParse({name:a.get("name"),origin:a.get("origin"),region:a.get("region"),farm:a.get("farm"),altitude:a.get("altitude"),process:a.get("process"),variety:a.get("variety"),roastLevel:a.get("roastLevel"),roaster:a.get("roaster"),description:a.get("description"),isPublic:"true"===a.get("isPublic"),flavorNotes:a.get("flavorNotes"),flavorLabels:a.get("flavorLabels"),flavorColors:a.get("flavorColors"),primaryColor:a.get("primaryColor")});if(!t.success)return{errors:t.error.flatten().fieldErrors,message:"입력 정보를 확인해주세요."};let{name:n,origin:o,region:d,farm:l,altitude:m,process:u,variety:p,roastLevel:f,roaster:b,description:g,isPublic:x,flavorNotes:h,flavorLabels:v,flavorColors:j,primaryColor:y}=t.data;try{return await i.zR.bean.create({data:{name:n,origin:o,region:d,farm:l,altitude:m,process:u,variety:p,roastLevel:f,roaster:b,description:g,isPublic:x,flavorNotes:h,flavorLabels:v,flavorColors:j,primaryColor:y,userId:e}}),(0,s.revalidatePath)("/beans"),{message:"원두 정보가 성공적으로 등록되었습니다."}}catch(e){return console.error("원두 등록 오류:",e),{errors:{_form:["원두 등록 중 오류가 발생했습니다. 다시 시도해주세요."]}}}}async function l(e){try{return await i.zR.bean.findMany({where:{isPublic:!0,...e?{OR:[{name:{contains:e}},{origin:{contains:e}},{roaster:{contains:e}}]}:{}},include:{user:{select:{name:!0}}},orderBy:{createdAt:"desc"}})}catch(e){return console.error("원두 목록 조회 오류:",e),[]}}async function m(e){try{return await i.zR.bean.findMany({where:{userId:e},orderBy:{createdAt:"desc"}})}catch(e){return console.error("사용자 원두 목록 조회 오류:",e),[]}}async function u(e){try{return await i.zR.bean.findUnique({where:{id:e},include:{user:{select:{name:!0}},recipes:{include:{user:{select:{name:!0}}},orderBy:{createdAt:"desc"},take:5},tasteNotes:{include:{user:{select:{name:!0}}},orderBy:{createdAt:"desc"},take:5}}})}catch(e){return console.error("원두 상세 조회 오류:",e),null}}async function p(e,r,a,t){let n=c.safeParse({name:t.get("name"),origin:t.get("origin"),region:t.get("region"),farm:t.get("farm"),altitude:t.get("altitude"),process:t.get("process"),variety:t.get("variety"),roastLevel:t.get("roastLevel"),roaster:t.get("roaster"),description:t.get("description"),isPublic:"true"===t.get("isPublic"),flavorNotes:t.get("flavorNotes"),flavorLabels:t.get("flavorLabels"),flavorColors:t.get("flavorColors"),primaryColor:t.get("primaryColor")});if(!n.success)return{errors:n.error.flatten().fieldErrors,message:"입력 정보를 확인해주세요."};let o=await i.zR.bean.findUnique({where:{id:e},select:{userId:!0}});if(!o||o.userId!==r)return{errors:{_form:["원두 정보를 수정할 권한이 없습니다."]}};let{name:d,origin:l,region:m,farm:u,altitude:p,process:f,variety:b,roastLevel:g,roaster:x,description:h,isPublic:v,flavorNotes:j,flavorLabels:y,flavorColors:w,primaryColor:P}=n.data;try{return await i.zR.bean.update({where:{id:e},data:{name:d,origin:l,region:m,farm:u,altitude:p,process:f,variety:b,roastLevel:g,roaster:x,description:h,isPublic:v,flavorNotes:j,flavorLabels:y,flavorColors:w,primaryColor:P}}),(0,s.revalidatePath)(`/beans/${e}`),{message:"원두 정보가 성공적으로 수정되었습니다."}}catch(e){return console.error("원두 수정 오류:",e),{errors:{_form:["원두 수정 중 오류가 발생했습니다. 다시 시도해주세요."]}}}}async function f(e,r){try{let a=await i.zR.bean.findUnique({where:{id:e},select:{userId:!0}});if(!a||a.userId!==r)return{success:!1,message:"원두 정보를 삭제할 권한이 없습니다."};return await i.zR.bean.delete({where:{id:e}}),(0,s.revalidatePath)("/beans"),{success:!0,message:"원두 정보가 성공적으로 삭제되었습니다."}}catch(e){return console.error("원두 삭제 오류:",e),{success:!1,message:"원두 삭제 중 오류가 발생했습니다. 다시 시도해주세요."}}}(0,o.D)([d,l,m,u,p,f]),(0,t.A)(d,"7094e3ba894d8125ad170d6181026c57ac27925c57",null),(0,t.A)(l,"40dd756df4f8233e05d1907947a699d86659ad0e72",null),(0,t.A)(m,"400f848ca9c3d3c5e2201c08bc803edee6521b5888",null),(0,t.A)(u,"4035cbe8ce0687cf0aad1bc64c9fe95bf4ef4b66df",null),(0,t.A)(p,"7814bbd4645cf52ef71e339537b3bdfc20cb9aed38",null),(0,t.A)(f,"60f44d3f410dbeca9194c741272be48515606c7c1d",null)},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[191,3395,5208,3796,4058,1253,1344,6151,856],()=>a(10732));module.exports=t})();