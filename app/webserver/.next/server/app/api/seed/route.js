(()=>{var e={};e.id=1617,e.ids=[1617],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44627:(e,r,t)=>{"use strict";t.d(r,{kR:()=>c,zR:()=>i});var n=t(96330);let o=global;o.isConnected||(o.isConnected=!1,o.connectionError=null,o.lastConnectionAttempt=0,o.connectionRetryCount=0);let i=o.prisma??function(){let e=process.env.DATABASE_URL;process.env.DIRECT_URL;let r={log:["error"],errorFormat:"pretty"};return e&&(r.datasources={db:{url:e}}),new n.PrismaClient(r)}();async function s(){try{let e=Date.now();if(o.isConnected)return{connected:!0,error:null};if(o.connectionError&&e-o.lastConnectionAttempt<3e4)return{connected:!1,error:o.connectionError};if(o.connectionRetryCount>=3){let r=e-o.lastConnectionAttempt;if(r<3e4)return{connected:!1,error:`${o.connectionError} (${Math.ceil((3e4-r)/1e3)}초 후 재시도 가능)`};o.connectionRetryCount=0}return o.lastConnectionAttempt=e,o.connectionRetryCount++,await i.user.findFirst({select:{id:!0},take:1}),o.isConnected=!0,o.connectionError=null,o.connectionRetryCount=0,{connected:!0,error:null}}catch(r){console.error("Database connection error:",r);let e="데이터베이스 연결 오류";return r instanceof Error&&(r.message.includes("P5010")||r.message.includes("fetch failed")?e="데이터베이스 서버에 연결할 수 없습니다. 네트워크 연결을 확인하거나 잠시 후 다시 시도해주세요.":r.message.includes("timeout")?e="데이터베이스 연결 시간이 초과되었습니다. 잠시 후 다시 시도해주세요.":r.message.includes("authentication")&&(e="데이터베이스 인증에 실패했습니다. 관리자에게 문의하세요.")),o.isConnected=!1,o.connectionError=e,{connected:!1,error:e}}}async function c(e,r,t){try{let n=await s();if(!n.connected)return t&&t(Error(n.error||"데이터베이스 연결 오류")),r;return await e()}catch(e){return console.error("Database operation error:",e),t&&t(e),r}}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},53228:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>w,routeModule:()=>p,serverHooks:()=>f,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var n={};t.r(n),t.d(n,{GET:()=>u});var o=t(48106),i=t(48819),s=t(12050),c=t(4235),a=t(44627),d=t(1610);async function u(){try{let e;let r="admin@chocoya.coffee",t=await a.zR.user.findUnique({where:{email:r}});if(t)e=t.id;else{let t=await d.Ay.hash("admin1234",10);e=(await a.zR.user.create({data:{email:r,name:"초코야 관리자",password:t}})).id}let n="basic-hand-drip-recipe";if(!await a.zR.recipe.findUnique({where:{id:n}})){let r=await a.zR.recipe.create({data:{id:n,title:"기본 푸어오버 레시피",description:"초보자도 쉽게 따라할 수 있는 기본 푸어오버 레시피입니다. 균형 잡힌 맛을 추출하는 것을 목표로 합니다.",isPublic:!0,brewingMethod:"푸어오버",difficulty:"초급",preparationTime:"3~4분",beanAmount:"15g",waterAmount:"250ml",waterTemp:"90-92\xb0C",grindSize:"중간",tools:"드리퍼, 필터, 서버, 주전자, 저울",acidity:"중간",sweetness:"중간-높음",body:"중간",recommendedBeans:"에티오피아 예가체프, 과테말라 안티구아",userId:e}});for(let e of[{recipeId:r.id,order:1,description:"필터를 드리퍼에 세팅하고 뜨거운 물로 필터를 적셔줍니다.",time:"30초"},{recipeId:r.id,order:2,description:"분쇄된 원두 15g을 드리퍼에 넣고 평평하게 만듭니다.",time:"10초"},{recipeId:r.id,order:3,description:"원두 중앙에 30ml의 물을 부어 블루밍을 시작합니다.",time:"30초",waterAmount:"30ml"},{recipeId:r.id,order:4,description:"원을 그리며 천천히 100ml까지 물을 부어줍니다.",time:"30초",waterAmount:"70ml"},{recipeId:r.id,order:5,description:"물이 절반 정도 내려가면 다시 180ml까지 물을 부어줍니다.",time:"30초",waterAmount:"80ml"},{recipeId:r.id,order:6,description:"마지막으로 250ml까지 물을 부어 추출을 완료합니다.",time:"60초",waterAmount:"70ml"}])await a.zR.step.create({data:e});for(let e of[{recipeId:r.id,content:"물을 부을 때는 원두 위에서 너무 높지 않게 조절하여 부어주세요."},{recipeId:r.id,content:"블루밍 시간은 원두의 신선도에 따라 조절할 수 있습니다. 로스팅 후 일주일 이내의 원두는 30-45초, 오래된 원두는 20-30초 정도가 적당합니다."},{recipeId:r.id,content:"전체 추출 시간은 2분 30초에서 3분 사이가 이상적입니다."}])await a.zR.brewingTip.create({data:e});return c.NextResponse.json({success:!0,message:"기본 레시피가 성공적으로 추가되었습니다.",recipe:r.id})}return c.NextResponse.json({success:!0,message:"기본 레시피가 이미 존재합니다.",recipe:n})}catch(e){return console.error("시드 오류:",e),c.NextResponse.json({success:!1,error:e.message},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/seed/route",pathname:"/api/seed",filename:"route",bundlePath:"app/api/seed/route"},resolvedPagePath:"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/api/seed/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:f}=p;function w(){return(0,s.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},80408:()=>{},87032:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[191,3744,1610],()=>t(53228));module.exports=n})();