(()=>{var e={};e.id=977,e.ids=[977],e.modules={480:(e,r,t)=>{"use strict";t.d(r,{DeleteGrinderButton:()=>d});var s=t(13486),a=t(60159),n=t(15577),i=t(37558);function d({grinderId:e,onDelete:r}){let[t,d]=(0,a.useState)(!1),c=async()=>{if(window.confirm("정말로 이 그라인더를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")){d(!0);try{await r(e)}catch(e){console.error("Error deleting grinder:",e)}finally{d(!1)}}};return(0,s.jsx)("button",{type:"button",onClick:c,disabled:t,className:"p-2 rounded-md bg-red-500 text-white hover:bg-red-600 transition-colors inline-flex items-center justify-center",children:t?(0,s.jsx)(n.A,{size:16,className:"animate-spin"}):(0,s.jsx)(i.A,{size:16})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9699:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(41253);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},15577:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(84667).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20065:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(68366).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20266:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.default,__next_app__:()=>l,pages:()=>o,routeModule:()=>u,tree:()=>c});var s=t(24332),a=t(48819),n=t(84423),i=t(97540),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let c={children:["",{children:["admin",{children:["grinders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,48111)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/admin/grinders/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,5910)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,80765)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/error.tsx"],"global-error":[()=>Promise.resolve().then(t.bind(t,84423)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/admin/grinders/page.tsx"],l={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/grinders/page",pathname:"/admin/grinders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},20821:(e,r,t)=>{Promise.resolve().then(t.bind(t,62778)),Promise.resolve().then(t.t.bind(t,42671,23))},22884:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(68366).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36896:(e,r,t)=>{"use strict";t.d(r,{DS:()=>u,Kx:()=>m,pe:()=>p,rr:()=>d,sm:()=>o,v6:()=>f,yA:()=>c,zH:()=>l});var s=t(10841);t(10935);var a=t(44627),n=t(30194),i=t(34078);async function d(e){try{let r={};return e&&(r={OR:[{name:{contains:e,mode:"insensitive"}},{name_ko:{contains:e,mode:"insensitive"}},{brand:{contains:e,mode:"insensitive"}},{type:{contains:e,mode:"insensitive"}},{description:{contains:e,mode:"insensitive"}},{description_ko:{contains:e,mode:"insensitive"}}]}),(await a.zR.grinder.findMany({where:r,include:{_count:{select:{settings:!0}}},orderBy:{brand:"asc"}})).map(e=>({...e,settings:[],settingsCount:e._count.settings}))}catch(e){return console.error("Error fetching grinders:",e),[]}}async function c(e){try{return await a.zR.grinder.findUnique({where:{id:e},include:{settings:!0,recipes:{include:{user:{select:{name:!0,image:!0}}},take:5,orderBy:{createdAt:"desc"}}}})}catch(e){return console.error("Error fetching grinder:",e),null}}async function o(e){try{let{settings:r,...t}=e,s=await a.zR.grinder.create({data:{...t,settings:{create:r||[]}}});return(0,n.revalidatePath)("/grinders"),{success:!0,data:s}}catch(e){return console.error("Error creating grinder:",e),{success:!1,error:"Failed to create grinder"}}}async function l(e,r){try{let{settings:t,...s}=r;t&&await a.zR.grinderSetting.deleteMany({where:{grinderId:e}});let i=await a.zR.grinder.update({where:{id:e},data:{...s,...t&&{settings:{create:t}}}});return(0,n.revalidatePath)(`/grinders/${e}`),(0,n.revalidatePath)("/grinders"),{success:!0,data:i}}catch(e){return console.error("Error updating grinder:",e),{success:!1,error:"Failed to update grinder"}}}async function u(e){try{return await a.zR.grinder.delete({where:{id:e}}),(0,n.revalidatePath)("/grinders"),{success:!0}}catch(e){return console.error("Error deleting grinder:",e),{success:!1,error:"Failed to delete grinder"}}}async function p(e,r){try{return await a.zR.grinderSetting.findMany({where:{grinderId:e,brewingMethod:{contains:r,mode:"insensitive"}}})}catch(e){return console.error("Error fetching grinder settings:",e),[]}}async function m(){try{for(let e of i.vu){let{settings:r,...t}=e,s=await a.zR.grinder.findFirst({where:{name:t.name,brand:t.brand}});if(s)for(let e of(await a.zR.grinder.update({where:{id:s.id},data:{name_ko:t.name_ko,description_ko:t.description_ko}}),r)){let r=await a.zR.grinderSetting.findFirst({where:{grinderId:s.id,name:e.name}});r&&await a.zR.grinderSetting.update({where:{id:r.id},data:{name_ko:e.name_ko,description_ko:e.description_ko}})}else await a.zR.grinder.create({data:{id:t.id,name:t.name,name_ko:t.name_ko,brand:t.brand,type:t.type,burr:t.burr,burrSize:t.burrSize,adjustmentType:t.adjustmentType,description:t.description,description_ko:t.description_ko,imageUrl:t.imageUrl,settings:{create:r.map(e=>({name:e.name,name_ko:e.name_ko,value:e.value,brewingMethod:e.brewingMethod,description:e.description,description_ko:e.description_ko}))}}})}return{success:!0,message:"그라인더 데이터가 성공적으로 추가되었습니다."}}catch(e){return console.error("Error seeding grinders:",e),{success:!1,error:"그라인더 데이터 추가 중 오류가 발생했습니다."}}}async function f(){try{return await a.zR.grinderSetting.deleteMany({}),await a.zR.grinder.deleteMany({}),(0,n.revalidatePath)("/grinders"),{success:!0,message:"모든 그라인더 데이터가 삭제되었습니다."}}catch(e){return console.error("Error deleting all grinders:",e),{success:!1,error:"모든 그라인더 삭제 중 오류가 발생했습니다."}}}(0,t(52943).D)([d,c,o,l,u,p,m,f]),(0,s.A)(d,"4039b3fc82c7cae0300ca48d4319cafd00ddc15042",null),(0,s.A)(c,"4092f0d1ee2e78dba22d09bcc75a9574c3492e6295",null),(0,s.A)(o,"4057da01a1dedce3831aa62d6027cb70fc05ab7149",null),(0,s.A)(l,"609040d7801287eee927927e2a7433f58bda2cc5a0",null),(0,s.A)(u,"40881af8245ace9d7983511a91a5b37676d13fca1e",null),(0,s.A)(p,"60b74c88484bc97542423700fc9442ff98cfdb30c8",null),(0,s.A)(m,"00fa2d22aa2f0d457ac8459aed2f66c89232351aae",null),(0,s.A)(f,"0097f32c3c6834504afc7f51568955b58358dafa87",null)},37558:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(84667).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},48111:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$RSC_SERVER_ACTION_0:()=>x,default:()=>g,dynamic:()=>m,metadata:()=>h,revalidate:()=>f});var s=t(38828),a=t(10841);t(10935),t(61365);var n=t(42671),i=t.n(n),d=t(36896),c=t(78443),o=t(20065),l=t(22884),u=t(30194),p=t(62778);let m="force-dynamic",f=0,h={title:"그라인더 관리 | 초코야 커피",description:"그라인더 정보를 관리합니다"},x=async function(e){await (0,d.DS)(e),(0,u.revalidatePath)("/admin/grinders")};async function g(){let e=await (0,d.rr)();var r=(0,a.A)(x,"400a9fe90eeae9a6da8cab6bce356e12f55afac05f",null);return(0,s.jsxs)("div",{className:"container py-10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(i(),{href:"/admin",className:"text-sm text-muted-foreground hover:text-foreground mb-2 flex items-center",children:[(0,s.jsx)(c.A,{size:16,className:"mr-1"})," 관리자 페이지로 돌아가기"]}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"그라인더 관리"})]}),(0,s.jsxs)(i(),{href:"/admin/grinders/create",className:"bg-primary text-primary-foreground px-4 py-2 rounded-md flex items-center",children:[(0,s.jsx)(o.A,{size:16,className:"mr-1"})," 새 그라인더 추가"]})]}),(0,s.jsx)("div",{className:"bg-card border rounded-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-muted/50",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"이름"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"브랜드"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"타입"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"조절 방식"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"설정 수"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center",children:"관리"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-t border-border hover:bg-muted/30",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:e.name_ko||e.name}),e.name_ko&&e.name_ko!==e.name&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.name})]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.brand}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.type}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.adjustmentType}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.settingsCount||0}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)(i(),{href:`/admin/grinders/${e.id}/edit`,className:"p-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 transition-colors inline-flex items-center justify-center",children:(0,s.jsx)(l.A,{size:16})}),(0,s.jsx)(p.DeleteGrinderButton,{grinderId:e.id,onDelete:r})]})})]},e.id))})]})})})]})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62677:(e,r,t)=>{Promise.resolve().then(t.bind(t,480)),Promise.resolve().then(t.t.bind(t,49989,23))},62778:(e,r,t)=>{"use strict";t.d(r,{DeleteGrinderButton:()=>s});let s=(0,t(33952).registerClientReference)(function(){throw Error("Attempted to call DeleteGrinderButton() from the server but DeleteGrinderButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/components/grinder/delete-grinder-button.tsx","DeleteGrinderButton")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64351:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"0097f32c3c6834504afc7f51568955b58358dafa87":()=>a.v6,"00fa2d22aa2f0d457ac8459aed2f66c89232351aae":()=>a.Kx,"400a9fe90eeae9a6da8cab6bce356e12f55afac05f":()=>s.$$RSC_SERVER_ACTION_0,"4039b3fc82c7cae0300ca48d4319cafd00ddc15042":()=>a.rr,"4057da01a1dedce3831aa62d6027cb70fc05ab7149":()=>a.sm,"40881af8245ace9d7983511a91a5b37676d13fca1e":()=>a.DS,"4092f0d1ee2e78dba22d09bcc75a9574c3492e6295":()=>a.yA,"609040d7801287eee927927e2a7433f58bda2cc5a0":()=>a.zH,"60b74c88484bc97542423700fc9442ff98cfdb30c8":()=>a.pe});var s=t(48111),a=t(36896)},74075:e=>{"use strict";e.exports=require("zlib")},78443:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(68366).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[191,3395,5208,3796,4058,1253,1344,856,4078],()=>t(20266));module.exports=s})();