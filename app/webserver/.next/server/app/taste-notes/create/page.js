(()=>{var e={};e.id=6555,e.ids=[6555],e.modules={2738:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.default,__next_app__:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>l});var s=r(24332),a=r(48819),n=r(84423),o=r(97540),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let l={children:["",{children:["taste-notes",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,82749)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/taste-notes/create/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,5910)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,80765)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/error.tsx"],"global-error":[()=>Promise.resolve().then(r.bind(r,84423)),"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/app/taste-notes/create/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/taste-notes/create/page",pathname:"/taste-notes/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21434:(e,t,r)=>{Promise.resolve().then(r.bind(r,78813)),Promise.resolve().then(r.t.bind(r,42671,23))},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},49327:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var s=r(13486),a=r(60159),n=r(49989),o=r.n(n),i=r(2984);let l=(0,r(84667).A)("Bean",[["path",{d:"M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z",key:"1tvzk7"}],["path",{d:"M5.341 10.62a4 4 0 1 0 5.279-5.28",key:"2cyri2"}]]);var d=r(58499),c=r(68830),m=r(11892),u=r(51978);function p({selectedLabels:e=[],size:t=500,className:r="",interactive:n=!1,onSelect:o}){let i=(0,a.useRef)(null),[l,d]=(0,a.useState)(null),[c,m]=(0,a.useState)(null),[u,p]=(0,a.useState)([]);return(0,s.jsxs)("div",{className:r,children:[(0,s.jsx)("canvas",{ref:i,width:t,height:t,style:{width:t,height:t,cursor:n?"pointer":"default"},onMouseMove:e=>{if(!n)return;let t=i.current;if(!t)return;let r=t.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top;m({x:s,y:a});let o=t.width/2,l=t.height/2,c=s-o,p=a-l,b=Math.sqrt(c*c+p*p),x=Math.atan2(p,c);x<0&&(x+=2*Math.PI);let h=null;for(let e of u){let{startAngle:t,endAngle:r,innerRadius:s,outerRadius:a}=e,n=s<=b&&b<=a;if(t<=x&&x<=r&&n&&2===(h=e).level)break}d(h?h.path:null)},onMouseLeave:()=>{m(null),d(null)},onClick:()=>{n&&o&&l&&o(l)}}),l&&(0,s.jsx)("div",{className:"mt-2 text-sm text-center font-medium",children:l})]})}var b=r(70358);let x=(0,b.createServerReference)("706ac7a9d56f17f0fb902edde42346cf8c62685798",b.callServer,void 0,b.findSourceMapURL,"createTasteNote");r(51697);var h=r(80546);function f({userId:e}){let t=(0,i.useRouter)(),{toast:r}=(0,h.dj)(),[n,b]=(0,a.useState)(!1),[f,g]=(0,a.useState)([]),[v,j]=(0,a.useState)([]),[w,y]=(0,a.useState)([]),[N,z]=(0,a.useState)({coffeeName:"",origin:"",roastLevel:"",roaster:"",brewingMethod:"",grindSize:"",beanAmount:"",waterAmount:"",waterTemp:"",brewTime:"",ratio:"",overallRating:3,acidity:5,sweetness:5,body:5,bitterness:5,notes:"",recipeId:"",beanId:""}),k=()=>f.map(e=>u.mj.find(t=>t.id===e)).filter(e=>void 0!==e),C=e=>{let{name:t,value:r}=e.target;z(e=>({...e,[t]:r}))},A=e=>{let{name:t,value:r}=e.target;z(e=>({...e,[t]:parseInt(r)}))},P=async s=>{s.preventDefault(),b(!0);try{let s=k(),a=s.map(e=>e.color).join(","),n=s.length>0?s[0].color:void 0,o=new FormData;Object.entries(N).forEach(([e,t])=>{null!=t&&o.append(e,t.toString())}),o.append("flavorLabels",f.join(",")),o.append("flavorColors",a),n&&o.append("primaryColor",n);let i=await x(e,{},o);i.errors?r({title:"맛 노트 저장 실패",description:i.message||"맛 노트를 저장하는 중 오류가 발생했습니다.",variant:"destructive"}):(r({title:"맛 노트 저장 성공",description:"맛 노트가 성공적으로 저장되었습니다."}),t.push("/taste-notes"))}catch(e){console.error("Error submitting form:",e),r({title:"맛 노트 저장 실패",description:"서버 오류가 발생했습니다. 다시 시도해주세요.",variant:"destructive"})}finally{b(!1)}};return(0,s.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"기본 정보"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"beanId",className:"block text-sm font-medium mb-1",children:"등록된 원두 선택 (선택사항)"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("select",{id:"beanId",name:"beanId",value:N.beanId,onChange:e=>{let t=e.target.value;if(t){let e=v.find(e=>e.id===t);e&&z(r=>({...r,beanId:t,coffeeName:e.name,origin:e.origin||r.origin,roastLevel:e.roastLevel||r.roastLevel,roaster:e.roaster||r.roaster}))}else z(e=>({...e,beanId:""}))},className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,s.jsx)("option",{value:"",children:"원두 선택..."}),v.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," ",e.origin?`(${e.origin})`:""]},e.id))]}),(0,s.jsx)(o(),{href:"/beans/create",className:"whitespace-nowrap px-3 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 text-sm",children:(0,s.jsx)(l,{className:"w-4 h-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"등록된 원두를 선택하면 관련 정보가 자동으로 채워집니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"recipeId",className:"block text-sm font-medium mb-1",children:"관련 레시피 선택 (선택사항)"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("select",{id:"recipeId",name:"recipeId",value:N.recipeId,onChange:C,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,s.jsx)("option",{value:"",children:"레시피 선택..."}),w.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.title," (",e.brewingMethod,")"]},e.id))]}),(0,s.jsx)(o(),{href:"/recipes/create",className:"whitespace-nowrap px-3 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 text-sm",children:(0,s.jsx)(d.A,{className:"w-4 h-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"이 맛 노트와 관련된 레시피가 있다면 선택하세요."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"coffeeName",className:"block text-sm font-medium mb-1",children:["커피 이름 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"coffeeName",name:"coffeeName",value:N.coffeeName,onChange:C,required:!0,placeholder:"예: 에티오피아 예가체프",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"origin",className:"block text-sm font-medium mb-1",children:"원산지"}),(0,s.jsx)("input",{type:"text",id:"origin",name:"origin",value:N.origin,onChange:C,placeholder:"예: 에티오피아",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"roastLevel",className:"block text-sm font-medium mb-1",children:"로스팅 단계"}),(0,s.jsxs)("select",{id:"roastLevel",name:"roastLevel",value:N.roastLevel,onChange:C,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,s.jsx)("option",{value:"",children:"로스팅 단계 선택"}),(0,s.jsx)("option",{value:"라이트",children:"라이트 로스트"}),(0,s.jsx)("option",{value:"미디엄 라이트",children:"미디엄 라이트 로스트"}),(0,s.jsx)("option",{value:"미디엄",children:"미디엄 로스트"}),(0,s.jsx)("option",{value:"미디엄 다크",children:"미디엄 다크 로스트"}),(0,s.jsx)("option",{value:"다크",children:"다크 로스트"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"roaster",className:"block text-sm font-medium mb-1",children:"로스터리"}),(0,s.jsx)("input",{type:"text",id:"roaster",name:"roaster",value:N.roaster,onChange:C,placeholder:"예: 생트 로스터스",className:"w-full p-3 rounded-md border border-input bg-background"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"추출 정보"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"brewingMethod",className:"block text-sm font-medium mb-1",children:["추출 방식 ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"brewingMethod",name:"brewingMethod",value:N.brewingMethod,onChange:C,required:!0,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,s.jsx)("option",{value:"",children:"추출 방식 선택"}),(0,s.jsx)("option",{value:"푸어오버",children:"푸어오버"}),(0,s.jsx)("option",{value:"에스프레소",children:"에스프레소"}),(0,s.jsx)("option",{value:"프렌치프레스",children:"프렌치프레스"}),(0,s.jsx)("option",{value:"에어로프레스",children:"에어로프레스"}),(0,s.jsx)("option",{value:"모카포트",children:"모카포트"}),(0,s.jsx)("option",{value:"콜드브루",children:"콜드브루"}),(0,s.jsx)("option",{value:"더치커피",children:"더치커피"}),(0,s.jsx)("option",{value:"기타",children:"기타"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"grindSize",className:"block text-sm font-medium mb-1",children:"분쇄도"}),(0,s.jsx)("input",{type:"text",id:"grindSize",name:"grindSize",value:N.grindSize,onChange:C,placeholder:"예: 중간(미디엄)",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"beanAmount",className:"block text-sm font-medium mb-1",children:"원두량"}),(0,s.jsx)("input",{type:"text",id:"beanAmount",name:"beanAmount",value:N.beanAmount,onChange:C,placeholder:"예: 15g",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"waterAmount",className:"block text-sm font-medium mb-1",children:"물 용량"}),(0,s.jsx)("input",{type:"text",id:"waterAmount",name:"waterAmount",value:N.waterAmount,onChange:C,placeholder:"예: 250ml",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"waterTemp",className:"block text-sm font-medium mb-1",children:"물 온도"}),(0,s.jsx)("input",{type:"text",id:"waterTemp",name:"waterTemp",value:N.waterTemp,onChange:C,placeholder:"예: 92\xb0C",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"brewTime",className:"block text-sm font-medium mb-1",children:"추출 시간"}),(0,s.jsx)("input",{type:"text",id:"brewTime",name:"brewTime",value:N.brewTime,onChange:C,placeholder:"예: 3:30",className:"w-full p-3 rounded-md border border-input bg-background"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"맛 프로필"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"종합 평가"}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("input",{type:"range",id:"overallRating",name:"overallRating",min:"1",max:"5",value:N.overallRating,onChange:A,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"})}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,s.jsx)("span",{children:"1"}),(0,s.jsx)("span",{children:"2"}),(0,s.jsx)("span",{children:"3"}),(0,s.jsx)("span",{children:"4"}),(0,s.jsx)("span",{children:"5"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"산미 (Acidity)"}),(0,s.jsx)("input",{type:"range",id:"acidity",name:"acidity",min:"1",max:"10",value:N.acidity,onChange:A,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,s.jsx)("span",{children:"낮음"}),(0,s.jsx)("span",{children:"높음"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"단맛 (Sweetness)"}),(0,s.jsx)("input",{type:"range",id:"sweetness",name:"sweetness",min:"1",max:"10",value:N.sweetness,onChange:A,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,s.jsx)("span",{children:"낮음"}),(0,s.jsx)("span",{children:"높음"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"바디감 (Body)"}),(0,s.jsx)("input",{type:"range",id:"body",name:"body",min:"1",max:"10",value:N.body,onChange:A,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,s.jsx)("span",{children:"가벼움"}),(0,s.jsx)("span",{children:"무거움"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"쓴맛 (Bitterness)"}),(0,s.jsx)("input",{type:"range",id:"bitterness",name:"bitterness",min:"1",max:"10",value:N.bitterness,onChange:A,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,s.jsx)("span",{children:"낮음"}),(0,s.jsx)("span",{children:"높음"})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"맛 노트 (Flavor Notes)"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"이 커피에서 느껴지는 맛과 향을 선택해주세요. 여러 개 선택 가능합니다."}),(0,s.jsx)(m.Z,{selectedLabels:f,onChange:g}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center mt-6",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"이 커피의 맛을 시각화한 이미지"}),(0,s.jsx)(p,{selectedLabels:k(),size:200,className:"mt-4"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"노트"}),(0,s.jsx)("textarea",{id:"notes",name:"notes",rows:5,value:N.notes,onChange:C,placeholder:"이 커피에 대한 추가 느낌이나 메모를 적어보세요.",className:"w-full p-3 rounded-md border border-input bg-background resize-none"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(o(),{href:"/taste-notes",className:"px-4 py-2 border border-input rounded-md hover:bg-accent transition-colors",children:"취소"}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center",children:n?(0,s.jsx)(s.Fragment,{children:"저장 중..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"저장하기"]})})]})]})}r(57920)},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},60212:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"400f848ca9c3d3c5e2201c08bc803edee6521b5888":()=>x.NH,"4035cbe8ce0687cf0aad1bc64c9fe95bf4ef4b66df":()=>x.JQ,"405333280afb49bd5ebeef282575f6f93f24589c34":()=>b.G,"4063dc433687fb1ab011722b26b8d484a075215405":()=>b.qt,"408191d41010e8e74369d10f04490452deec48a802":()=>c,"40bb057f7efcb39c01b4b2de998e3babc3c4b12557":()=>b.dU,"40dd756df4f8233e05d1907947a699d86659ad0e72":()=>x.y7,"60656bf6eb9cde1a757d9c13ae21fe84e52646eddc":()=>m,"609f95c8c84f1d849c956e7b65bb9f9c4ca3a7d04a":()=>p,"60d74d0be3c3bb8c15ff4a2ac4bd90336ad6b21541":()=>b.cX,"60f44d3f410dbeca9194c741272be48515606c7c1d":()=>x.IV,"706ac7a9d56f17f0fb902edde42346cf8c62685798":()=>d,"708d2101345b6641f648d5022e57c057d8d2b59f86":()=>b.zs,"7094e3ba894d8125ad170d6181026c57ac27925c57":()=>x.JV,"7814bbd4645cf52ef71e339537b3bdfc20cb9aed38":()=>x.wI,"785c7abb38e866a5f9396fbcf3b432543699990c22":()=>u,"78caecb7db732db0fd8ce5a41ac82f47dfb73afe07":()=>b.sw});var s=r(3742);r(93200);var a=r(24479),n=r(93500),o=r(91728),i=r(77256);let l=o.z.object({coffeeName:o.z.string().min(1,{message:"원두 이름을 입력해주세요."}),origin:o.z.string().optional(),roastLevel:o.z.string().optional(),roaster:o.z.string().optional(),brewingMethod:o.z.string().min(1,{message:"추출 방식을 선택해주세요."}),grindSize:o.z.string().optional(),beanAmount:o.z.string().optional(),waterAmount:o.z.string().optional(),waterTemp:o.z.string().optional(),brewTime:o.z.string().optional(),ratio:o.z.string().optional(),overallRating:o.z.coerce.number().min(1).max(5).optional(),acidity:o.z.coerce.number().min(1).max(10).optional(),sweetness:o.z.coerce.number().min(1).max(10).optional(),body:o.z.coerce.number().min(1).max(10).optional(),bitterness:o.z.coerce.number().min(1).max(10).optional(),flavorNotes:o.z.string().optional(),flavorLabels:o.z.string().optional(),flavorColors:o.z.string().optional(),primaryColor:o.z.string().optional(),notes:o.z.string().optional(),recipeId:o.z.string().optional().nullable(),beanId:o.z.string().optional().nullable()});async function d(e,t,r){let s=l.safeParse({coffeeName:r.get("coffeeName"),origin:r.get("origin"),roastLevel:r.get("roastLevel"),roaster:r.get("roaster"),brewingMethod:r.get("brewingMethod"),grindSize:r.get("grindSize"),beanAmount:r.get("beanAmount"),waterAmount:r.get("waterAmount"),waterTemp:r.get("waterTemp"),brewTime:r.get("brewTime"),ratio:r.get("ratio"),overallRating:r.get("overallRating"),acidity:r.get("acidity"),sweetness:r.get("sweetness"),body:r.get("body"),bitterness:r.get("bitterness"),flavorNotes:r.get("flavorNotes"),flavorLabels:r.get("flavorLabels"),flavorColors:r.get("flavorColors"),primaryColor:r.get("primaryColor"),notes:r.get("notes"),recipeId:r.get("recipeId"),beanId:r.get("beanId")});if(!s.success)return{errors:s.error.flatten().fieldErrors,message:"입력 정보를 확인해주세요."};let{coffeeName:o,origin:i,roastLevel:d,roaster:c,brewingMethod:m,grindSize:u,beanAmount:p,waterAmount:b,waterTemp:x,brewTime:h,ratio:f,overallRating:g,acidity:v,sweetness:j,body:w,bitterness:y,flavorNotes:N,flavorLabels:z,flavorColors:k,primaryColor:C,notes:A,recipeId:P,beanId:I}=s.data;try{return await n.zR.tasteNote.create({data:{coffeeName:o,origin:i,roastLevel:d,roaster:c,brewingMethod:m,grindSize:u,beanAmount:p,waterAmount:b,waterTemp:x,brewTime:h,ratio:f,overallRating:g,acidity:v,sweetness:j,body:w,bitterness:y,flavorNotes:N,flavorLabels:z,flavorColors:k,primaryColor:C,notes:A,recipeId:P,beanId:I,userId:e}}),P&&(0,a.revalidatePath)(`/recipes/${P}`),(0,a.revalidatePath)("/taste-notes"),{message:"맛 노트가 성공적으로 저장되었습니다."}}catch(e){return console.error("맛 노트 생성 오류:",e),{errors:{_form:["맛 노트 저장 중 오류가 발생했습니다. 다시 시도해주세요."]}}}}async function c(e){try{return await n.zR.tasteNote.findMany({where:{userId:e},include:{recipe:{select:{id:!0,title:!0}}},orderBy:{createdAt:"desc"}})}catch(e){throw console.error("맛 노트 조회 오류:",e),Error("맛 노트를 불러오는 중 오류가 발생했습니다.")}}async function m(e,t){try{return await n.zR.tasteNote.findUnique({where:{id:e,userId:t},include:{recipe:{select:{id:!0,title:!0}}}})}catch(e){throw console.error("맛 노트 상세 조회 오류:",e),Error("맛 노트를 불러오는 중 오류가 발생했습니다.")}}async function u(e,t,r,s){let o=l.safeParse({coffeeName:s.get("coffeeName"),origin:s.get("origin"),roastLevel:s.get("roastLevel"),roaster:s.get("roaster"),brewingMethod:s.get("brewingMethod"),grindSize:s.get("grindSize"),beanAmount:s.get("beanAmount"),waterAmount:s.get("waterAmount"),waterTemp:s.get("waterTemp"),brewTime:s.get("brewTime"),ratio:s.get("ratio"),overallRating:s.get("overallRating"),acidity:s.get("acidity"),sweetness:s.get("sweetness"),body:s.get("body"),bitterness:s.get("bitterness"),flavorNotes:s.get("flavorNotes"),flavorLabels:s.get("flavorLabels"),flavorColors:s.get("flavorColors"),primaryColor:s.get("primaryColor"),notes:s.get("notes"),recipeId:s.get("recipeId"),beanId:s.get("beanId")});if(!o.success)return{errors:o.error.flatten().fieldErrors,message:"입력 정보를 확인해주세요."};let i=await n.zR.tasteNote.findUnique({where:{id:e},select:{userId:!0}});if(!i||i.userId!==t)return{errors:{_form:["맛 노트를 수정할 권한이 없습니다."]}};let{coffeeName:d,origin:c,roastLevel:m,roaster:u,brewingMethod:p,grindSize:b,beanAmount:x,waterAmount:h,waterTemp:f,brewTime:g,ratio:v,overallRating:j,acidity:w,sweetness:y,body:N,bitterness:z,flavorNotes:k,flavorLabels:C,flavorColors:A,primaryColor:P,notes:I,recipeId:q,beanId:M}=o.data;try{return await n.zR.tasteNote.update({where:{id:e},data:{coffeeName:d,origin:c,roastLevel:m,roaster:u,brewingMethod:p,grindSize:b,beanAmount:x,waterAmount:h,waterTemp:f,brewTime:g,ratio:v,overallRating:j,acidity:w,sweetness:y,body:N,bitterness:z,flavorNotes:k,flavorLabels:C,flavorColors:A,primaryColor:P,notes:I,recipeId:q,beanId:M}}),q&&(0,a.revalidatePath)(`/recipes/${q}`),(0,a.revalidatePath)("/taste-notes"),(0,a.revalidatePath)(`/taste-notes/${e}`),{message:"맛 노트가 성공적으로 수정되었습니다."}}catch(e){return console.error("맛 노트 수정 오류:",e),{errors:{_form:["맛 노트 수정 중 오류가 발생했습니다. 다시 시도해주세요."]}}}}async function p(e,t){try{let r=await n.zR.tasteNote.findUnique({where:{id:e},select:{userId:!0}});if(!r||r.userId!==t)return{success:!1,message:"맛 노트를 삭제할 권한이 없습니다."};return await n.zR.tasteNote.delete({where:{id:e}}),(0,a.revalidatePath)("/taste-notes"),{success:!0,message:"맛 노트가 성공적으로 삭제되었습니다."}}catch(e){return console.error("맛 노트 삭제 오류:",e),{success:!1,message:"맛 노트 삭제 중 오류가 발생했습니다. 다시 시도해주세요."}}}(0,i.D)([d,c,m,u,p]),(0,s.A)(d,"706ac7a9d56f17f0fb902edde42346cf8c62685798",null),(0,s.A)(c,"408191d41010e8e74369d10f04490452deec48a802",null),(0,s.A)(m,"60656bf6eb9cde1a757d9c13ae21fe84e52646eddc",null),(0,s.A)(u,"785c7abb38e866a5f9396fbcf3b432543699990c22",null),(0,s.A)(p,"609f95c8c84f1d849c956e7b65bb9f9c4ca3a7d04a",null);var b=r(20483),x=r(84880)},61602:(e,t,r)=>{Promise.resolve().then(r.bind(r,49327)),Promise.resolve().then(r.t.bind(r,49989,23))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78813:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/components/taste-note/taste-note-form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jelly/WebstormProjects/chocoya-coffee/app/webserver/src/components/taste-note/taste-note-form.tsx","default")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82749:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>c});var s=r(38828);r(61365);var a=r(42671),n=r.n(a),o=r(78443),i=r(78813),l=r(84875),d=r(42543);let c={title:"맛 노트 작성 | 초코야 커피",description:"새로운 커피 맛 노트를 작성하세요"};async function m(){let e=await (0,l.U)(),{data:{user:t}}=await e.auth.getUser();return t?.id||(0,d.redirect)("/auth/login?callbackUrl=/taste-notes/create"),(0,s.jsxs)("div",{className:"container px-4 md:px-6 py-6 md:py-10",children:[(0,s.jsxs)(n(),{href:"/taste-notes",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-4 md:mb-6",children:[(0,s.jsx)(o.A,{size:16,className:"mr-1"})," 맛 노트 목록으로 돌아가기"]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"새 맛 노트 작성"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"커피의 맛과 느낌을 기록하세요. 나만의 커피 경험을 추적하고 공유할 수 있습니다."})]}),(0,s.jsx)(i.default,{userId:t.id})]})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[191,3395,5208,3796,4058,1253,8655,1728,7102,1991,856,4179,9748],()=>r(2738));module.exports=s})();