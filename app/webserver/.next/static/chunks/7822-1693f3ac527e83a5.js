(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7822],{1985:(e,a,r)=>{"use strict";r.d(a,{default:()=>b});var i=r(4568),l=r(7620),n=r(2942),o=r(14),d=r(2935);let s=(0,d.createServerReference)("7814bbd4645cf52ef71e339537b3bdfc20cb9aed38",d.callServer,void 0,d.findSourceMapURL,"updateBean"),t=(0,d.createServerReference)("7094e3ba894d8125ad170d6181026c57ac27925c57",d.callServer,void 0,d.findSourceMapURL,"createBean"),m=[{id:"ethiopia",name:"에티오피아",major:!0},{id:"kenya",name:"케냐",major:!0},{id:"colombia",name:"콜롬비아",major:!0},{id:"guatemala",name:"과테말라",major:!0},{id:"panama",name:"파나마",major:!0},{id:"costa_rica",name:"코스타리카",major:!0},{id:"rwanda",name:"르완다",major:!0},{id:"el_salvador",name:"엘살바도르",major:!0},{id:"nicaragua",name:"니카라과",major:!0},{id:"honduras",name:"온두라스",major:!0},{id:"burundi",name:"부룬디",major:!0},{id:"yemen",name:"예멘",major:!0},{id:"tanzania",name:"탄자니아",major:!0},{id:"peru",name:"페루",major:!0},{id:"brazil",name:"브라질",major:!1},{id:"vietnam",name:"베트남",major:!1},{id:"indonesia",name:"인도네시아",major:!1},{id:"india",name:"인도",major:!1},{id:"uganda",name:"우간다",major:!1},{id:"mexico",name:"멕시코",major:!1},{id:"ecuador",name:"에콰도르",major:!1},{id:"papua_new_guinea",name:"파푸아뉴기니",major:!1},{id:"jamaica",name:"자메이카",major:!1},{id:"thailand",name:"태국",major:!1},{id:"laos",name:"라오스",major:!1},{id:"china",name:"중국",major:!1},{id:"dominican_republic",name:"도미니카 공화국",major:!1},{id:"cuba",name:"쿠바",major:!1},{id:"haiti",name:"아이티",major:!1},{id:"bolivia",name:"볼리비아",major:!1}],c=()=>[...m.filter(e=>e.major),...m.filter(e=>!e.major)];var u=r(6293),p=r(6852);function b(e){var a;let{userId:r,bean:d,isEditing:m=!1}=e,b=(0,n.useRouter)(),{toast:h}=(0,o.dj)(),[j,v]=(0,l.useState)(!1),[x,g]=(0,l.useState)((null==d?void 0:d.flavorLabels)?d.flavorLabels.split(",").filter(Boolean):[]),f=c(),[N,y]=(0,l.useState)({name:(null==d?void 0:d.name)||"",origin:(null==d?void 0:d.origin)||"",region:(null==d?void 0:d.region)||"",farm:(null==d?void 0:d.farm)||"",altitude:(null==d?void 0:d.altitude)||"",process:(null==d?void 0:d.process)||"",variety:(null==d?void 0:d.variety)||"",roastLevel:(null==d?void 0:d.roastLevel)||"",roaster:(null==d?void 0:d.roaster)||"",description:(null==d?void 0:d.description)||"",isPublic:null===(a=null==d?void 0:d.isPublic)||void 0===a||a}),k=e=>{let{name:a,value:r}=e.target;y(e=>({...e,[a]:r}))},w=async e=>{e.preventDefault(),v(!0);try{let e=new FormData;if(Object.entries(N).forEach(a=>{let[r,i]=a;null!=i&&e.append(r,i.toString())}),x.length>0){var a;e.append("flavorLabels",x.join(","));let r=x.map(e=>p.mj.find(a=>a.id===e)).filter(Boolean),i=r.map(e=>null==e?void 0:e.color).join(",");e.append("flavorColors",i),r.length>0&&(null===(a=r[0])||void 0===a?void 0:a.color)&&e.append("primaryColor",r[0].color);let l=r.map(e=>null==e?void 0:e.name).join(", ");e.append("flavorNotes",l)}let i=m?await s(d.id,r,{},e):await t(r,{},e);i.errors?h({title:"원두 정보 저장 실패",description:i.message||"원두 정보를 저장하는 중 오류가 발생했습니다.",variant:"destructive"}):(h({title:"원두 정보 저장 성공",description:"원두 정보가 성공적으로 저장되었습니다."}),b.push("/beans"))}catch(e){console.error("Error submitting form:",e),h({title:"원두 정보 저장 실패",description:"서버 오류가 발생했습니다. 다시 시도해주세요.",variant:"destructive"})}finally{v(!1)}};return(0,i.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"기본 정보"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:["원두 이름 ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("input",{type:"text",id:"name",name:"name",value:N.name,onChange:k,required:!0,placeholder:"예: 에티오피아 예가체프",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"origin",className:"block text-sm font-medium mb-1",children:"원산지"}),(0,i.jsxs)("select",{id:"origin",name:"origin",value:N.origin,onChange:k,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,i.jsx)("option",{value:"",children:"원산지 선택"}),(0,i.jsx)("optgroup",{label:"주요 커피 생산국",children:f.filter(e=>e.major).map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,i.jsx)("optgroup",{label:"기타 생산국",children:f.filter(e=>!e.major).map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"region",className:"block text-sm font-medium mb-1",children:"지역"}),(0,i.jsx)("input",{type:"text",id:"region",name:"region",value:N.region,onChange:k,placeholder:"예: 예가체프",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"farm",className:"block text-sm font-medium mb-1",children:"농장명"}),(0,i.jsx)("input",{type:"text",id:"farm",name:"farm",value:N.farm,onChange:k,placeholder:"예: 아리차",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"altitude",className:"block text-sm font-medium mb-1",children:"고도 (m)"}),(0,i.jsx)("input",{type:"number",id:"altitude",name:"altitude",value:N.altitude,onChange:k,placeholder:"예: 1900",min:"0",step:"10",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"process",className:"block text-sm font-medium mb-1",children:"프로세스"}),(0,i.jsxs)("select",{id:"process",name:"process",value:N.process,onChange:k,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,i.jsx)("option",{value:"",children:"프로세스 선택"}),(0,i.jsx)("option",{value:"워시드",children:"워시드"}),(0,i.jsx)("option",{value:"내추럴",children:"내추럴"}),(0,i.jsx)("option",{value:"허니",children:"허니"}),(0,i.jsx)("option",{value:"펄프드 내추럴",children:"펄프드 내추럴"}),(0,i.jsx)("option",{value:"웻 헐드",children:"웻 헐드"}),(0,i.jsx)("option",{value:"기타",children:"기타"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"variety",className:"block text-sm font-medium mb-1",children:"품종"}),(0,i.jsx)("input",{type:"text",id:"variety",name:"variety",value:N.variety,onChange:k,placeholder:"예: 게이샤, 부르봉, 카투라",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"roastLevel",className:"block text-sm font-medium mb-1",children:"로스팅 단계"}),(0,i.jsxs)("select",{id:"roastLevel",name:"roastLevel",value:N.roastLevel,onChange:k,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,i.jsx)("option",{value:"",children:"로스팅 단계 선택"}),(0,i.jsx)("option",{value:"라이트",children:"라이트 로스트"}),(0,i.jsx)("option",{value:"미디엄 라이트",children:"미디엄 라이트 로스트"}),(0,i.jsx)("option",{value:"미디엄",children:"미디엄 로스트"}),(0,i.jsx)("option",{value:"미디엄 다크",children:"미디엄 다크 로스트"}),(0,i.jsx)("option",{value:"다크",children:"다크 로스트"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"roaster",className:"block text-sm font-medium mb-1",children:"로스터리"}),(0,i.jsx)("input",{type:"text",id:"roaster",name:"roaster",value:N.roaster,onChange:k,placeholder:"예: 센트커피",className:"w-full p-3 rounded-md border border-input bg-background"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"향미 프로필"}),(0,i.jsx)("p",{className:"text-muted-foreground mb-4",children:"이 원두가 가진 향미 노트를 선택해주세요. 여러 개 선택 가능합니다."}),(0,i.jsx)(u.Z,{selectedLabels:x,onChange:e=>g(e)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"설명"}),(0,i.jsx)("textarea",{id:"description",name:"description",rows:5,value:N.description,onChange:k,placeholder:"원두에 대한 설명이나 추가 정보를 입력하세요",className:"w-full p-3 rounded-md border border-input bg-background resize-none"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"isPublic",name:"isPublic",checked:N.isPublic,onChange:e=>{let{name:a,checked:r}=e.target;y(e=>({...e,[a]:r}))},className:"rounded text-primary"}),(0,i.jsx)("label",{htmlFor:"isPublic",className:"text-sm",children:"이 원두 정보를 다른 사용자에게 공개합니다."})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,i.jsx)("button",{type:"button",onClick:()=>b.push("/beans"),disabled:j,className:"px-4 py-2 border border-input rounded-md hover:bg-accent transition-colors",children:"취소"}),(0,i.jsx)("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:j?"저장 중...":m?"수정하기":"등록하기"})]})]})}},7822:(e,a,r)=>{Promise.resolve().then(r.bind(r,1985)),Promise.resolve().then(r.t.bind(r,7261,23))}}]);