(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4029,5424],{2068:(e,r,t)=>{Promise.resolve().then(t.bind(t,4030)),Promise.resolve().then(t.t.bind(t,7261,23))},4030:(e,r,t)=>{"use strict";t.d(r,{default:()=>h});var i=t(4568),a=t(7620),s=t(2942),l=t(1938),o=t(60),n=t(880),d=t(1874),c=t(9594),m=t(4930),u=t.n(m),p=t(7261),f=t.n(p);let b=n.z.object({name:n.z.string().min(1,"이름을 입력해주세요"),email:n.z.string().email("유효한 이메일 주소를 입력해주세요"),bio:n.z.string().optional()});function h(e){let{user:r}=e,t=(0,s.useRouter)(),[n,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)(r.image),x=(0,a.useRef)(null),{register:g,handleSubmit:v,formState:{errors:j}}=(0,l.mN)({resolver:(0,o.u)(b),defaultValues:{name:r.name||"",email:r.email||"",bio:r.bio||""}}),y=()=>{var e;null===(e=x.current)||void 0===e||e.click()},N=async e=>{m(!0);try{var i,a;let s=new FormData;s.append("name",e.name),s.append("email",e.email),s.append("bio",e.bio||""),(null===(a=x.current)||void 0===a?void 0:null===(i=a.files)||void 0===i?void 0:i[0])&&s.append("profileImage",x.current.files[0]);let l=await fetch("/api/users/".concat(r.id,"/profile"),{method:"PUT",body:s});if(l.ok)d.oR.success("프로필이 성공적으로 업데이트되었습니다"),t.push("/auth/profile"),t.refresh();else{let e=await l.json();d.oR.error(e.error||"프로필 업데이트 중 오류가 발생했습니다")}}catch(e){console.error("프로필 업데이트 오류:",e),d.oR.error("서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요")}finally{m(!1)}};return(0,i.jsx)("form",{onSubmit:v(N),children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"프로필 사진"}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center overflow-hidden cursor-pointer",onClick:y,children:p?(0,i.jsx)(u(),{src:p,alt:"프로필 이미지",width:80,height:80,className:"w-full h-full object-cover"}):(0,i.jsx)(c.A,{size:40,className:"text-muted-foreground"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"file",ref:x,onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!t)return;if(t.size>2097152){d.oR.error("이미지 크기는 2MB 이하여야 합니다");return}if(!t.type.startsWith("image/")){d.oR.error("이미지 파일만 업로드 가능합니다");return}let i=new FileReader;i.onload=e=>{var r;h(null===(r=e.target)||void 0===r?void 0:r.result)},i.readAsDataURL(t)},accept:"image/jpeg, image/png, image/gif",className:"hidden"}),(0,i.jsx)("button",{type:"button",className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm cursor-pointer",onClick:y,children:"사진 업로드"}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"JPG, PNG 파일. 최대 크기 2MB."})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"이름"}),(0,i.jsx)("input",{type:"text",id:"name",...g("name"),className:"w-full p-3 rounded-md border border-input bg-background"}),j.name&&(0,i.jsx)("p",{className:"text-destructive text-xs mt-1",children:j.name.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"이메일"}),(0,i.jsx)("input",{type:"email",id:"email",...g("email"),className:"w-full p-3 rounded-md border border-input bg-background"}),j.email&&(0,i.jsx)("p",{className:"text-destructive text-xs mt-1",children:j.email.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium mb-2",children:"자기소개"}),(0,i.jsx)("textarea",{id:"bio",...g("bio"),rows:4,className:"w-full p-3 rounded-md border border-input bg-background resize-none"})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,i.jsx)(f(),{href:"/auth/profile",className:"px-4 py-2 border border-input rounded-md hover:bg-accent transition-colors cursor-pointer",children:"취소"}),(0,i.jsx)("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:n?"저장 중...":"저장하기"})]})]})})}},4930:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return n},getImageProps:function(){return o}});let i=t(1510),a=t(7258),s=t(3970),l=i._(t(170));function o(e){let{props:r}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let n=s.Image},8889:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var i=t(7620);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,i.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:d="",children:c,iconNode:m,...u}=e;return(0,i.createElement)("svg",{ref:r,...l,width:a,height:a,stroke:t,strokeWidth:n?24*Number(o)/Number(a):o,className:s("lucide",d),...u},[...m.map(e=>{let[r,t]=e;return(0,i.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),n=(e,r)=>{let t=(0,i.forwardRef)((t,l)=>{let{className:n,...d}=t;return(0,i.createElement)(o,{ref:l,iconNode:r,className:s("lucide-".concat(a(e)),n),...d})});return t.displayName="".concat(e),t}},9594:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(8889).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[7261,4239,1874,3970,587,8315,7358],()=>r(2068)),_N_E=e.O()}]);