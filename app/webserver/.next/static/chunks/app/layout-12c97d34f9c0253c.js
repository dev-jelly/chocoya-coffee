(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{66:(e,s,t)=>{"use strict";t.d(s,{UserNav:()=>A});var r=t(4568),a=t(7620),n=t(3032),o=t(3928);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.bL,{ref:s,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})});i.displayName=n.bL.displayName;let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n._V,{ref:s,className:(0,o.cn)("aspect-square h-full w-full",t),...a})});l.displayName=n._V.displayName;let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.H4,{ref:s,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})});d.displayName=n.H4.displayName;var c=t(7227),u=t(212);function m(e){let{...s}=e;return(0,r.jsx)(u.bL,{"data-slot":"dropdown-menu",...s})}function f(e){let{...s}=e;return(0,r.jsx)(u.l9,{"data-slot":"dropdown-menu-trigger",...s})}function h(e){let{className:s,sideOffset:t=4,...a}=e;return(0,r.jsx)(u.ZL,{children:(0,r.jsx)(u.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md",s),...a})})}function x(e){let{...s}=e;return(0,r.jsx)(u.YJ,{"data-slot":"dropdown-menu-group",...s})}function p(e){let{className:s,inset:t,variant:a="default",...n}=e;return(0,r.jsx)(u.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":a,className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n})}function g(e){let{className:s,inset:t,...a}=e;return(0,r.jsx)(u.JU,{"data-slot":"dropdown-menu-label","data-inset":t,className:(0,o.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",s),...a})}function v(e){let{className:s,...t}=e;return(0,r.jsx)(u.wv,{"data-slot":"dropdown-menu-separator",className:(0,o.cn)("bg-border -mx-1 my-1 h-px",s),...t})}var j=t(2942),b=t(7261),N=t.n(b),y=t(4193),w=t(1874);function C(e){let{variant:s="default",className:t,children:n}=e,[o,i]=(0,a.useState)(!1),l=(0,j.useRouter)(),d=async()=>{i(!0);try{await (0,y.CI)(),w.oR.success("로그아웃되었습니다."),l.push("/"),l.refresh()}catch(e){console.error("로그아웃 오류:",e),w.oR.error("로그아웃 중 오류가 발생했습니다.")}finally{i(!1)}};return(0,r.jsx)(c.$,{variant:s,onClick:d,disabled:o,className:t,children:o?"로그아웃 중...":n||"로그아웃"})}var k=t(4338);function A(e){var s;let{user:t}=e;(0,j.useRouter)();let a=t.name?t.name.split(" ").map(e=>e[0]).join(""):(null===(s=t.email)||void 0===s?void 0:s.charAt(0))||"U",n=t.email===(k.env.NEXT_PUBLIC_ADMIN_EMAIL||"admin@chocoya.coffee");return(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{asChild:!0,children:(0,r.jsx)(c.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full cursor-pointer",children:(0,r.jsxs)(i,{className:"h-8 w-8",children:[(0,r.jsx)(l,{src:t.image||"",alt:t.name||"사용자"}),(0,r.jsx)(d,{children:a})]})})}),(0,r.jsxs)(h,{className:"w-56",align:"end",forceMount:!0,children:[(0,r.jsx)(g,{className:"font-normal",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:t.name||"사용자"}),(0,r.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})}),(0,r.jsx)(v,{}),(0,r.jsxs)(x,{children:[(0,r.jsx)(p,{asChild:!0,children:(0,r.jsx)(N(),{href:"/auth/profile",className:"cursor-pointer",children:"프로필"})}),(0,r.jsx)(p,{asChild:!0,children:(0,r.jsx)(N(),{href:"/recipes/my",className:"cursor-pointer",children:"내 레시피"})}),n&&(0,r.jsx)(p,{asChild:!0,children:(0,r.jsx)(N(),{href:"/admin",className:"cursor-pointer",children:"관리자 대시보드"})})]}),(0,r.jsx)(v,{}),(0,r.jsx)(p,{asChild:!0,children:(0,r.jsx)(C,{variant:"ghost",className:"cursor-pointer w-full justify-start",children:"로그아웃"})})]})]})}},155:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,3139,23)),Promise.resolve().then(t.bind(t,9286)),Promise.resolve().then(t.bind(t,5168)),Promise.resolve().then(t.bind(t,66)),Promise.resolve().then(t.bind(t,7680)),Promise.resolve().then(t.bind(t,7252)),Promise.resolve().then(t.t.bind(t,7261,23)),Promise.resolve().then(t.t.bind(t,6572,23))},1525:(e,s,t)=>{"use strict";t.d(s,{N:()=>i});var r=t(4057),a=t(4338);let n=a.env.NEXT_PUBLIC_SUPABASE_URL||"",o=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";if(!n||!o)throw Error("Supabase URL과 익명 키가 설정되지 않았습니다.");let i=(0,r.createBrowserClient)(n,o)},3139:()=>{},3928:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(2987),a=t(607);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}},4193:(e,s,t)=>{"use strict";t.d(s,{Bh:()=>l,CI:()=>i,Ru:()=>n,bk:()=>a,cU:()=>o});var r=t(1525);async function a(e,s){let{data:t,error:a}=await r.N.auth.signUp({email:e,password:s});if(a)throw a;return t}async function n(e,s){let{data:t,error:a}=await r.N.auth.signInWithPassword({email:e,password:s});if(a)return a.message.includes("Invalid login credentials")?{success:!1,error:"이메일 또는 비밀번호가 올바르지 않습니다."}:a.message.includes("Email not confirmed")?{success:!1,error:"이메일 인증이 완료되지 않았습니다. 메일함을 확인해주세요."}:a.message.includes("rate limit")?{success:!1,error:"로그인 시도가 너무 많습니다. 잠시 후 다시 시도해주세요."}:{success:!1,error:"로그인 중 오류가 발생했습니다: "+a.message};return{success:!0,data:t}}async function o(e){let{data:s,error:t}=await r.N.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});return t?t.message.includes("popup blocked")?{success:!1,error:"팝업이 차단되었습니다. 팝업 차단을 해제해주세요."}:t.message.includes("canceled")?{success:!1,error:"로그인이 취소되었습니다."}:{success:!1,error:"".concat(e," 로그인 중 오류가 발생했습니다: ")+t.message}:{success:!0,data:s}}async function i(){let{error:e}=await r.N.auth.signOut();if(e)throw e}function l(e){return r.N.auth.onAuthStateChange((s,t)=>{e((null==t?void 0:t.user)||null)})}},5168:(e,s,t)=>{"use strict";t.d(s,{MobileNavClient:()=>U});var r=t(4568),a=t(7620),n=t(7261),o=t.n(n),i=t(7227),l=t(5173),d=t(4908),c=t(2463),u=t(3928);let m=l.bL,f=l.l9;l.bm;let h=l.ZL,x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.hJ,{className:(0,u.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:s})});x.displayName=l.hJ.displayName;let p=(0,d.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),g=a.forwardRef((e,s)=>{let{side:t="right",className:a,children:n,...o}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(x,{}),(0,r.jsxs)(l.UC,{ref:s,className:(0,u.cn)(p({side:t}),a),...o,children:[n,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=l.UC.displayName;let v=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.hE,{ref:s,className:(0,u.cn)("text-lg font-semibold text-foreground",t),...a})});v.displayName=l.hE.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.VY,{ref:s,className:(0,u.cn)("text-sm text-muted-foreground",t),...a})}).displayName=l.VY.displayName;var j=t(7510),b=t(3809),N=t(731),y=t(3425),w=t(5957),C=t(1056),k=t(4508),A=t(9594),z=t(4411),_=t(6599),E=t(4338);function U(e){let{isLoggedIn:s}=e,[t,n]=(0,a.useState)(!1),{user:l}=(0,_.A)(),d=(null==l?void 0:l.email)===(E.env.NEXT_PUBLIC_ADMIN_EMAIL||"admin@chocoya.coffee");return(0,r.jsxs)(m,{open:t,onOpenChange:n,children:[(0,r.jsx)(f,{asChild:!0,children:(0,r.jsxs)(i.$,{variant:"ghost",size:"icon",className:"md:hidden",children:[(0,r.jsx)(j.A,{size:24}),(0,r.jsx)("span",{className:"sr-only",children:"메뉴 열기"})]})}),(0,r.jsxs)(g,{side:"left",className:"w-[280px] sm:w-[350px] p-0",children:[(0,r.jsx)(v,{className:"sr-only",children:"초코야 커피 메뉴"}),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsxs)(o(),{href:"/",className:"text-xl font-bold flex items-center",onClick:()=>n(!1),children:[(0,r.jsx)(b.A,{className:"mr-2",size:24}),(0,r.jsx)("span",{children:"초코야 커피"})]}),(0,r.jsxs)(i.$,{variant:"ghost",size:"icon",onClick:()=>n(!1),children:[(0,r.jsx)(c.A,{size:24}),(0,r.jsx)("span",{className:"sr-only",children:"메뉴 닫기"})]})]}),(0,r.jsxs)("nav",{className:"flex flex-col gap-1 p-4 flex-1 overflow-y-auto",children:[(0,r.jsxs)(o(),{href:"/",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(N.A,{size:18}),(0,r.jsx)("span",{children:"홈"})]}),(0,r.jsxs)(o(),{href:"/recipes",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(y.A,{size:18}),(0,r.jsx)("span",{children:"레시피"})]}),(0,r.jsxs)(o(),{href:"/beans",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(b.A,{size:18}),(0,r.jsx)("span",{children:"원두 라이브러리"})]}),(0,r.jsxs)(o(),{href:"/brewing-guide",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(w.A,{size:18}),(0,r.jsx)("span",{children:"브루잉 가이드"})]}),(0,r.jsxs)(o(),{href:"/taste-notes/create",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(C.A,{size:18}),(0,r.jsx)("span",{children:"맛 노트"})]}),(0,r.jsxs)(o(),{href:"/recipes/create",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(b.A,{size:18}),(0,r.jsx)("span",{children:"레시피 등록"})]}),s&&(0,r.jsxs)(o(),{href:"/beans/create",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(b.A,{size:18}),(0,r.jsx)("span",{children:"원두 등록"})]}),d&&(0,r.jsxs)(o(),{href:"/admin",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(k.A,{size:18}),(0,r.jsx)("span",{children:"관리자 대시보드"})]})]}),(0,r.jsx)("div",{className:"border-t p-4",children:s?(0,r.jsxs)(o(),{href:"/auth/profile",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(A.A,{size:18}),(0,r.jsx)("span",{children:"내 프로필"})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)(o(),{href:"/auth/login",className:"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent",onClick:()=>n(!1),children:[(0,r.jsx)(z.A,{size:18}),(0,r.jsx)("span",{children:"로그인"})]}),(0,r.jsx)(i.$,{asChild:!0,className:"w-full mt-2",children:(0,r.jsx)(o(),{href:"/auth/register",onClick:()=>n(!1),children:"회원가입"})})]})})]})]})]})}},6599:(e,s,t)=>{"use strict";t.d(s,{A:()=>d,O:()=>l});var r=t(4568),a=t(7620),n=t(4193),o=t(1525);let i=(0,a.createContext)({user:null,loading:!0,error:null});function l(e){let{children:s}=e,[t,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null);return(0,a.useEffect)(()=>{async function e(){try{c(!0);let{data:e,error:s}=await o.N.auth.getUser();!s&&e.user?l(e.user):l(null)}catch(e){console.error("Error loading user:",e),l(null),m(e instanceof Error?e:Error("Unknown error"))}finally{c(!1)}}let{data:s}=(0,n.Bh)(e=>{l(e),c(!1)});return e(),()=>{null==s||s.subscription.unsubscribe()}},[]),(0,r.jsx)(i.Provider,{value:{user:t,loading:d,error:u},children:s})}function d(){return(0,a.useContext)(i)}},7227:(e,s,t)=>{"use strict";t.d(s,{$:()=>l});var r=t(4568),a=t(7620),n=t(4908),o=t(3928);let i=(0,n.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,s)=>{let{className:t,variant:a,size:n,asChild:l=!1,...d}=e;return(0,r.jsx)("button",{className:(0,o.cn)(i({variant:a,size:n,className:t})),ref:s,...d})});l.displayName="Button"},7252:(e,s,t)=>{"use strict";t.d(s,{default:()=>n});var r=t(4568),a=t(6599);function n(e){let{children:s}=e;return(0,r.jsx)(a.O,{children:s})}},7680:(e,s,t)=>{"use strict";t.d(s,{Toaster:()=>o});var r=t(4568),a=t(1752),n=t(1874);let o=e=>{let{...s}=e,{theme:t="system"}=(0,a.D)();return(0,r.jsx)(n.l$,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground font-medium",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground font-medium"}},...s})}},9286:(e,s,t)=>{"use strict";t.d(s,{CreateBeanButtonClient:()=>u});var r=t(4568),a=t(7227),n=t(3809),o=t(7261),i=t.n(o),l=t(6599),d=t(1874);function c(e){let{className:s="",variant:t="default",size:o="default"}=e,{user:c}=(0,l.A)();return(0,r.jsx)(r.Fragment,{children:c?(0,r.jsx)(i(),{href:"/beans/create",children:(0,r.jsxs)(a.$,{variant:t,size:o,className:"".concat(s," cursor-pointer"),children:[(0,r.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"원두 등록"]})}):(0,r.jsxs)(a.$,{variant:t,size:o,className:"".concat(s," cursor-pointer"),onClick:()=>{if(!c){d.oR.error("로그인이 필요합니다",{description:"원두 등록을 위해 먼저 로그인해주세요."});return}},children:[(0,r.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"원두 등록"]})})}function u(e){return(0,r.jsx)(c,{...e})}}},e=>{var s=s=>e(e.s=s);e.O(0,[6779,7261,7540,1874,8568,4057,3630,3247,587,8315,7358],()=>s(155)),_N_E=e.O()}]);