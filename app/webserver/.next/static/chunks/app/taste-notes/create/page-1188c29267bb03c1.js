(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6555],{554:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(8889).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1980:(e,t,l)=>{"use strict";l.d(t,{q:()=>s});var a=l(2935);let s=(0,a.createServerReference)("4063dc433687fb1ab011722b26b8d484a075215405",a.callServer,void 0,a.findSourceMapURL,"getRecipes")},2469:(e,t,l)=>{"use strict";l.d(t,{y:()=>s});var a=l(2935);let s=(0,a.createServerReference)("40dd756df4f8233e05d1907947a699d86659ad0e72",a.callServer,void 0,a.findSourceMapURL,"getBeans")},3519:(e,t,l)=>{"use strict";l.d(t,{default:()=>v});var a=l(4568),s=l(7620),r=l(7261),n=l.n(r),i=l(2942);let d=(0,l(8889).A)("Bean",[["path",{d:"M10.165 6.598C9.954 7.478 9.64 8.36 9 9c-.64.64-1.521.954-2.402 1.165A6 6 0 0 0 8 22c7.732 0 14-6.268 14-14a6 6 0 0 0-11.835-1.402Z",key:"1tvzk7"}],["path",{d:"M5.341 10.62a4 4 0 1 0 5.279-5.28",key:"2cyri2"}]]);var o=l(3809),c=l(554),m=l(6293),h=l(6852);function u(e){let{selectedLabels:t=[],size:l=500,className:r="",interactive:n=!1,onSelect:i}=e,d=(0,s.useRef)(null),[o,c]=(0,s.useState)(null),[m,u]=(0,s.useState)(null),[p,b]=(0,s.useState)([]),g=()=>{let e=d.current;if(!e)return;let l=e.getContext("2d");if(!l)return;l.clearRect(0,0,e.width,e.height);let a=e.width/2,s=e.height/2,r=Math.min(a,s)-10;l.beginPath(),l.arc(a,s,r,0,2*Math.PI),l.fillStyle="#FFFFFF",l.fill(),l.strokeStyle="#DDDDDD",l.lineWidth=1,l.stroke(),l.font="bold ".concat(.05*r,"px Arial"),l.fillStyle=h.C6.title.colorCode,l.textAlign="center",l.textBaseline="middle",l.fillText(h.C6.title.ko,a,s-.85*r);let n=[],i=h.C6.categories,c=i.length;if(i.forEach((e,t)=>{let i=t/c*Math.PI*2,d=(t+1)/c*Math.PI*2,m=.8*r,h=.5*r;l.beginPath(),l.moveTo(a+h*Math.cos(i),s+h*Math.sin(i)),l.arc(a,s,h,i,d),l.arc(a,s,m,d,i,!0),l.closePath();let u="".concat(e.name.ko);l.fillStyle=o===u?x(e.colorCode,20):e.colorCode,l.fill(),l.strokeStyle="#FFFFFF",l.lineWidth=1,l.stroke(),n.push({path:u,startAngle:i,endAngle:d,innerRadius:h,outerRadius:m,color:e.colorCode,level:1});let p=(h+m)/2,b=(i+d)/2,g=a+p*Math.cos(b),f=s+p*Math.sin(b),j=Math.min(.04*r,(m-h)*.6);l.font="bold ".concat(j,"px Arial"),l.fillStyle=function(e){let t=parseInt(e.slice(1,3),16),l=parseInt(e.slice(3,5),16);return(299*t+587*l+114*parseInt(e.slice(5,7),16))/1e3>128?"#000000":"#FFFFFF"}(e.colorCode),l.save(),l.translate(g,f);let v=b;if(b>Math.PI/2&&b<3*Math.PI/2&&(v+=Math.PI),l.rotate(v),l.textAlign="center",l.textBaseline="middle",l.fillText(e.name.ko,0,0),l.restore(),e.subcategories.length>0){let t=(d-i)/e.subcategories.length;e.subcategories.forEach((d,c)=>{let h=i+c*t,u=i+(c+1)*t,p=.95*r;l.beginPath(),l.moveTo(a+m*Math.cos(h),s+m*Math.sin(h)),l.arc(a,s,m,h,u),l.arc(a,s,p,u,h,!0),l.closePath();let b="".concat(e.name.ko," > ").concat(d.name.ko);l.fillStyle=o===b?x(d.colorCode,20):d.colorCode,l.fill(),l.strokeStyle="#FFFFFF",l.lineWidth=1,l.stroke(),n.push({path:b,startAngle:h,endAngle:u,innerRadius:m,outerRadius:p,color:d.colorCode,level:2})})}}),l.beginPath(),l.arc(a,s,.5*r,0,2*Math.PI),l.fillStyle="#FFFFFF",l.fill(),l.strokeStyle="#DDDDDD",l.lineWidth=1,l.stroke(),t.length>0){let e=t.map(e=>e.name).join(", ");l.font="bold ".concat(.04*r,"px Arial"),l.fillStyle="#333333",l.textAlign="center",l.textBaseline="middle";let n=e.split(", "),i=[],d="";n.forEach(e=>{let t=d?"".concat(d,", ").concat(e):e;l.measureText(t).width>.8*r&&""!==d?(i.push(d),d=e):d=t}),d&&i.push(d);let o=.05*r,c=s-(i.length-1)*o/2;i.forEach((e,t)=>{l.fillText(e,a,c+t*o)})}else l.font="".concat(.06*r,"px Arial"),l.fillStyle="#999999",l.textAlign="center",l.textBaseline="middle",l.fillText("향미를 선택하세요",a,s);b(n)};return(0,s.useEffect)(()=>{d.current&&(d.current.width=l,d.current.height=l,g())},[l,t,o]),(0,a.jsxs)("div",{className:r,children:[(0,a.jsx)("canvas",{ref:d,width:l,height:l,style:{width:l,height:l,cursor:n?"pointer":"default"},onMouseMove:e=>{if(!n)return;let t=d.current;if(!t)return;let l=t.getBoundingClientRect(),a=e.clientX-l.left,s=e.clientY-l.top;u({x:a,y:s});let r=t.width/2,i=t.height/2,o=a-r,m=s-i,h=Math.sqrt(o*o+m*m),x=Math.atan2(m,o);x<0&&(x+=2*Math.PI);let b=null;for(let e of p){let{startAngle:t,endAngle:l,innerRadius:a,outerRadius:s}=e,r=a<=h&&h<=s;if(t<=x&&x<=l&&r&&2===(b=e).level)break}c(b?b.path:null)},onMouseLeave:()=>{u(null),c(null)},onClick:()=>{n&&i&&o&&i(o)}}),o&&(0,a.jsx)("div",{className:"mt-2 text-sm text-center font-medium",children:o})]})}function x(e,t){let l=parseInt(e.replace("#",""),16),a=Math.round(2.55*t);return"#"+(0x1000000+(Math.min(255,(l>>16&255)+a)<<16)+(Math.min(255,(l>>8&255)+a)<<8)+Math.min(255,(255&l)+a)).toString(16).slice(1)}var p=l(2935);let b=(0,p.createServerReference)("706ac7a9d56f17f0fb902edde42346cf8c62685798",p.callServer,void 0,p.findSourceMapURL,"createTasteNote");var g=l(1980),f=l(14),j=l(2469);function v(e){let{userId:t}=e,l=(0,i.useRouter)(),{toast:r}=(0,f.dj)(),[x,p]=(0,s.useState)(!1),[v,N]=(0,s.useState)([]),[y,w]=(0,s.useState)([]),[k,F]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{w(await (0,j.y)()),F(await (0,g.q)())})()},[]);let[M,C]=(0,s.useState)({coffeeName:"",origin:"",roastLevel:"",roaster:"",brewingMethod:"",grindSize:"",beanAmount:"",waterAmount:"",waterTemp:"",brewTime:"",ratio:"",overallRating:3,acidity:5,sweetness:5,body:5,bitterness:5,notes:"",recipeId:"",beanId:""}),S=()=>v.map(e=>h.mj.find(t=>t.id===e)).filter(e=>void 0!==e),A=e=>{let{name:t,value:l}=e.target;C(e=>({...e,[t]:l}))},I=e=>{let{name:t,value:l}=e.target;C(e=>({...e,[t]:parseInt(l)}))},T=async e=>{e.preventDefault(),p(!0);try{let e=S(),a=e.map(e=>e.color).join(","),s=e.length>0?e[0].color:void 0,n=new FormData;Object.entries(M).forEach(e=>{let[t,l]=e;null!=l&&n.append(t,l.toString())}),n.append("flavorLabels",v.join(",")),n.append("flavorColors",a),s&&n.append("primaryColor",s);let i=await b(t,{},n);i.errors?r({title:"맛 노트 저장 실패",description:i.message||"맛 노트를 저장하는 중 오류가 발생했습니다.",variant:"destructive"}):(r({title:"맛 노트 저장 성공",description:"맛 노트가 성공적으로 저장되었습니다."}),l.push("/taste-notes"))}catch(e){console.error("Error submitting form:",e),r({title:"맛 노트 저장 실패",description:"서버 오류가 발생했습니다. 다시 시도해주세요.",variant:"destructive"})}finally{p(!1)}};return(0,a.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"기본 정보"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"beanId",className:"block text-sm font-medium mb-1",children:"등록된 원두 선택 (선택사항)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{id:"beanId",name:"beanId",value:M.beanId,onChange:e=>{let t=e.target.value;if(t){let e=y.find(e=>e.id===t);e&&C(l=>({...l,beanId:t,coffeeName:e.name,origin:e.origin||l.origin,roastLevel:e.roastLevel||l.roastLevel,roaster:e.roaster||l.roaster}))}else C(e=>({...e,beanId:""}))},className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,a.jsx)("option",{value:"",children:"원두 선택..."}),y.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," ",e.origin?"(".concat(e.origin,")"):""]},e.id))]}),(0,a.jsx)(n(),{href:"/beans/create",className:"whitespace-nowrap px-3 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 text-sm",children:(0,a.jsx)(d,{className:"w-4 h-4"})})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"등록된 원두를 선택하면 관련 정보가 자동으로 채워집니다."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"recipeId",className:"block text-sm font-medium mb-1",children:"관련 레시피 선택 (선택사항)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{id:"recipeId",name:"recipeId",value:M.recipeId,onChange:A,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,a.jsx)("option",{value:"",children:"레시피 선택..."}),k.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.title," (",e.brewingMethod,")"]},e.id))]}),(0,a.jsx)(n(),{href:"/recipes/create",className:"whitespace-nowrap px-3 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 text-sm",children:(0,a.jsx)(o.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"이 맛 노트와 관련된 레시피가 있다면 선택하세요."})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"coffeeName",className:"block text-sm font-medium mb-1",children:["커피 이름 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"coffeeName",name:"coffeeName",value:M.coffeeName,onChange:A,required:!0,placeholder:"예: 에티오피아 예가체프",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"origin",className:"block text-sm font-medium mb-1",children:"원산지"}),(0,a.jsx)("input",{type:"text",id:"origin",name:"origin",value:M.origin,onChange:A,placeholder:"예: 에티오피아",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"roastLevel",className:"block text-sm font-medium mb-1",children:"로스팅 단계"}),(0,a.jsxs)("select",{id:"roastLevel",name:"roastLevel",value:M.roastLevel,onChange:A,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,a.jsx)("option",{value:"",children:"로스팅 단계 선택"}),(0,a.jsx)("option",{value:"라이트",children:"라이트 로스트"}),(0,a.jsx)("option",{value:"미디엄 라이트",children:"미디엄 라이트 로스트"}),(0,a.jsx)("option",{value:"미디엄",children:"미디엄 로스트"}),(0,a.jsx)("option",{value:"미디엄 다크",children:"미디엄 다크 로스트"}),(0,a.jsx)("option",{value:"다크",children:"다크 로스트"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"roaster",className:"block text-sm font-medium mb-1",children:"로스터리"}),(0,a.jsx)("input",{type:"text",id:"roaster",name:"roaster",value:M.roaster,onChange:A,placeholder:"예: 생트 로스터스",className:"w-full p-3 rounded-md border border-input bg-background"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"추출 정보"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"brewingMethod",className:"block text-sm font-medium mb-1",children:["추출 방식 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"brewingMethod",name:"brewingMethod",value:M.brewingMethod,onChange:A,required:!0,className:"w-full p-3 rounded-md border border-input bg-background",children:[(0,a.jsx)("option",{value:"",children:"추출 방식 선택"}),(0,a.jsx)("option",{value:"푸어오버",children:"푸어오버"}),(0,a.jsx)("option",{value:"에스프레소",children:"에스프레소"}),(0,a.jsx)("option",{value:"프렌치프레스",children:"프렌치프레스"}),(0,a.jsx)("option",{value:"에어로프레스",children:"에어로프레스"}),(0,a.jsx)("option",{value:"모카포트",children:"모카포트"}),(0,a.jsx)("option",{value:"콜드브루",children:"콜드브루"}),(0,a.jsx)("option",{value:"더치커피",children:"더치커피"}),(0,a.jsx)("option",{value:"기타",children:"기타"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"grindSize",className:"block text-sm font-medium mb-1",children:"분쇄도"}),(0,a.jsx)("input",{type:"text",id:"grindSize",name:"grindSize",value:M.grindSize,onChange:A,placeholder:"예: 중간(미디엄)",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"beanAmount",className:"block text-sm font-medium mb-1",children:"원두량"}),(0,a.jsx)("input",{type:"text",id:"beanAmount",name:"beanAmount",value:M.beanAmount,onChange:A,placeholder:"예: 15g",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"waterAmount",className:"block text-sm font-medium mb-1",children:"물 용량"}),(0,a.jsx)("input",{type:"text",id:"waterAmount",name:"waterAmount",value:M.waterAmount,onChange:A,placeholder:"예: 250ml",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"waterTemp",className:"block text-sm font-medium mb-1",children:"물 온도"}),(0,a.jsx)("input",{type:"text",id:"waterTemp",name:"waterTemp",value:M.waterTemp,onChange:A,placeholder:"예: 92\xb0C",className:"w-full p-3 rounded-md border border-input bg-background"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"brewTime",className:"block text-sm font-medium mb-1",children:"추출 시간"}),(0,a.jsx)("input",{type:"text",id:"brewTime",name:"brewTime",value:M.brewTime,onChange:A,placeholder:"예: 3:30",className:"w-full p-3 rounded-md border border-input bg-background"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"맛 프로필"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"종합 평가"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("input",{type:"range",id:"overallRating",name:"overallRating",min:"1",max:"5",value:M.overallRating,onChange:I,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,a.jsx)("span",{children:"1"}),(0,a.jsx)("span",{children:"2"}),(0,a.jsx)("span",{children:"3"}),(0,a.jsx)("span",{children:"4"}),(0,a.jsx)("span",{children:"5"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"산미 (Acidity)"}),(0,a.jsx)("input",{type:"range",id:"acidity",name:"acidity",min:"1",max:"10",value:M.acidity,onChange:I,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,a.jsx)("span",{children:"낮음"}),(0,a.jsx)("span",{children:"높음"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"단맛 (Sweetness)"}),(0,a.jsx)("input",{type:"range",id:"sweetness",name:"sweetness",min:"1",max:"10",value:M.sweetness,onChange:I,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,a.jsx)("span",{children:"낮음"}),(0,a.jsx)("span",{children:"높음"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"바디감 (Body)"}),(0,a.jsx)("input",{type:"range",id:"body",name:"body",min:"1",max:"10",value:M.body,onChange:I,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,a.jsx)("span",{children:"가벼움"}),(0,a.jsx)("span",{children:"무거움"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"쓴맛 (Bitterness)"}),(0,a.jsx)("input",{type:"range",id:"bitterness",name:"bitterness",min:"1",max:"10",value:M.bitterness,onChange:I,className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,a.jsx)("span",{children:"낮음"}),(0,a.jsx)("span",{children:"높음"})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"맛 노트 (Flavor Notes)"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"이 커피에서 느껴지는 맛과 향을 선택해주세요. 여러 개 선택 가능합니다."}),(0,a.jsx)(m.Z,{selectedLabels:v,onChange:N}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center mt-6",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"이 커피의 맛을 시각화한 이미지"}),(0,a.jsx)(u,{selectedLabels:S(),size:200,className:"mt-4"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"노트"}),(0,a.jsx)("textarea",{id:"notes",name:"notes",rows:5,value:M.notes,onChange:A,placeholder:"이 커피에 대한 추가 느낌이나 메모를 적어보세요.",className:"w-full p-3 rounded-md border border-input bg-background resize-none"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,a.jsx)(n(),{href:"/taste-notes",className:"px-4 py-2 border border-input rounded-md hover:bg-accent transition-colors",children:"취소"}),(0,a.jsx)("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center",children:x?(0,a.jsx)(a.Fragment,{children:"저장 중..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"저장하기"]})})]})]})}},3809:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(8889).A)("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]])},9198:(e,t,l)=>{Promise.resolve().then(l.bind(l,3519)),Promise.resolve().then(l.t.bind(l,7261,23))}},e=>{var t=t=>e(e.s=t);e.O(0,[7261,7540,782,3258,587,8315,7358],()=>t(9198)),_N_E=e.O()}]);