(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5349],{554:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(8889).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1789:(e,s,a)=>{Promise.resolve().then(a.bind(a,2248)),Promise.resolve().then(a.t.bind(a,7261,23))},1980:(e,s,a)=>{"use strict";a.d(s,{q:()=>t});var l=a(2935);let t=(0,l.createServerReference)("4063dc433687fb1ab011722b26b8d484a075215405",l.callServer,void 0,l.findSourceMapURL,"getRecipes")},2248:(e,s,a)=>{"use strict";a.d(s,{default:()=>h});var l=a(4568),t=a(7620),r=a(2942),n=a(554),i=a(6293),d=a(2935);let o=(0,d.createServerReference)("785c7abb38e866a5f9396fbcf3b432543699990c22",d.callServer,void 0,d.findSourceMapURL,"updateTasteNote");var m=a(14),c=a(2469),u=a(1980);function h(e){let{tasteNote:s,userId:a}=e,d=(0,r.useRouter)(),{toast:h}=(0,m.dj)(),[b,x]=(0,t.useState)(!1),[p,v]=(0,t.useState)([]),[j,f]=(0,t.useState)([]),[g,N]=(0,t.useState)([]),[w,y]=(0,t.useState)({coffeeName:s.coffeeName||"",origin:s.origin||"",roastLevel:s.roastLevel||"",roaster:s.roaster||"",brewingMethod:s.brewingMethod||"",grindSize:s.grindSize||"",beanAmount:s.beanAmount||"",waterAmount:s.waterAmount||"",waterTemp:s.waterTemp||"",brewTime:s.brewTime||"",ratio:s.ratio||"",overallRating:s.overallRating||3,acidity:s.acidity||5,sweetness:s.sweetness||5,body:s.body||5,bitterness:s.bitterness||5,notes:s.notes||"",recipeId:s.recipeId||"",beanId:s.beanId||""});(0,t.useEffect)(()=>{(async()=>{f(await (0,c.y)()),N(await (0,u.q)())})()},[]),(0,t.useEffect)(()=>{s.flavorLabels&&v(s.flavorLabels.split(",").filter(Boolean))},[s.flavorLabels]);let k=e=>{let{name:s,value:a}=e.target;y(e=>({...e,[s]:a}))},C=e=>{let{name:s,value:a}=e.target;y(e=>({...e,[s]:parseInt(a)}))},S=()=>p.map(e=>({id:e,color:"#"+Math.floor(0xffffff*Math.random()).toString(16)})),F=async e=>{e.preventDefault(),x(!0);try{let e=S(),l=e.map(e=>e.color).join(","),t=e.length>0?e[0].color:void 0,r=new FormData;Object.entries(w).forEach(e=>{let[s,a]=e;null!=a&&r.append(s,a.toString())}),r.append("flavorLabels",p.join(",")),r.append("flavorColors",l),t&&r.append("primaryColor",t);let n=await o(s.id,a,{},r);n.errors?h({title:"맛 노트 수정 실패",description:n.message||"맛 노트를 수정하는 중 오류가 발생했습니다.",variant:"destructive"}):(h({title:"맛 노트 수정 성공",description:"맛 노트가 성공적으로 수정되었습니다."}),d.push("/taste-notes/".concat(s.id)))}catch(e){console.error("Error submitting form:",e),h({title:"맛 노트 수정 실패",description:"서버 오류가 발생했습니다. 다시 시도해주세요.",variant:"destructive"})}finally{x(!1)}};return(0,l.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"커피 정보"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"coffeeName",className:"block text-sm font-medium mb-1",children:"원두 이름 *"}),(0,l.jsx)("input",{type:"text",id:"coffeeName",name:"coffeeName",value:w.coffeeName,onChange:k,required:!0,className:"w-full p-2 border rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"origin",className:"block text-sm font-medium mb-1",children:"원산지"}),(0,l.jsx)("input",{type:"text",id:"origin",name:"origin",value:w.origin,onChange:k,className:"w-full p-2 border rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"roastLevel",className:"block text-sm font-medium mb-1",children:"로스팅 단계"}),(0,l.jsxs)("select",{id:"roastLevel",name:"roastLevel",value:w.roastLevel,onChange:k,className:"w-full p-2 border rounded-md",children:[(0,l.jsx)("option",{value:"",children:"선택하세요"}),(0,l.jsx)("option",{value:"라이트",children:"라이트"}),(0,l.jsx)("option",{value:"미디엄 라이트",children:"미디엄 라이트"}),(0,l.jsx)("option",{value:"미디엄",children:"미디엄"}),(0,l.jsx)("option",{value:"미디엄 다크",children:"미디엄 다크"}),(0,l.jsx)("option",{value:"다크",children:"다크"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"roaster",className:"block text-sm font-medium mb-1",children:"로스터리"}),(0,l.jsx)("input",{type:"text",id:"roaster",name:"roaster",value:w.roaster,onChange:k,className:"w-full p-2 border rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"beanId",className:"block text-sm font-medium mb-1",children:"등록된 원두 선택"}),(0,l.jsxs)("select",{id:"beanId",name:"beanId",value:w.beanId,onChange:k,className:"w-full p-2 border rounded-md",children:[(0,l.jsx)("option",{value:"",children:"선택하세요"}),j.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," - ",e.roaster||"로스터리 정보 없음"]},e.id))]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"추출 정보"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"brewingMethod",className:"block text-sm font-medium mb-1",children:"추출 방법 *"}),(0,l.jsxs)("select",{id:"brewingMethod",name:"brewingMethod",value:w.brewingMethod,onChange:k,required:!0,className:"w-full p-2 border rounded-md",children:[(0,l.jsx)("option",{value:"",children:"선택하세요"}),(0,l.jsx)("option",{value:"에스프레소",children:"에스프레소"}),(0,l.jsx)("option",{value:"드립",children:"드립"}),(0,l.jsx)("option",{value:"프렌치 프레스",children:"프렌치 프레스"}),(0,l.jsx)("option",{value:"에어로프레스",children:"에어로프레스"}),(0,l.jsx)("option",{value:"모카포트",children:"모카포트"}),(0,l.jsx)("option",{value:"콜드브루",children:"콜드브루"}),(0,l.jsx)("option",{value:"사이폰",children:"사이폰"}),(0,l.jsx)("option",{value:"클레버",children:"클레버"}),(0,l.jsx)("option",{value:"케멕스",children:"케멕스"}),(0,l.jsx)("option",{value:"기타",children:"기타"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"grindSize",className:"block text-sm font-medium mb-1",children:"분쇄도"}),(0,l.jsx)("input",{type:"text",id:"grindSize",name:"grindSize",value:w.grindSize,onChange:k,className:"w-full p-2 border rounded-md"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"beanAmount",className:"block text-sm font-medium mb-1",children:"원두량"}),(0,l.jsx)("input",{type:"text",id:"beanAmount",name:"beanAmount",value:w.beanAmount,onChange:k,placeholder:"예: 18g",className:"w-full p-2 border rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"waterAmount",className:"block text-sm font-medium mb-1",children:"물 용량"}),(0,l.jsx)("input",{type:"text",id:"waterAmount",name:"waterAmount",value:w.waterAmount,onChange:k,placeholder:"예: 250ml",className:"w-full p-2 border rounded-md"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"waterTemp",className:"block text-sm font-medium mb-1",children:"물 온도"}),(0,l.jsx)("input",{type:"text",id:"waterTemp",name:"waterTemp",value:w.waterTemp,onChange:k,placeholder:"예: 93\xb0C",className:"w-full p-2 border rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"brewTime",className:"block text-sm font-medium mb-1",children:"추출 시간"}),(0,l.jsx)("input",{type:"text",id:"brewTime",name:"brewTime",value:w.brewTime,onChange:k,placeholder:"예: 2분 30초",className:"w-full p-2 border rounded-md"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"ratio",className:"block text-sm font-medium mb-1",children:"비율"}),(0,l.jsx)("input",{type:"text",id:"ratio",name:"ratio",value:w.ratio,onChange:k,placeholder:"예: 1:15",className:"w-full p-2 border rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"recipeId",className:"block text-sm font-medium mb-1",children:"사용한 레시피"}),(0,l.jsxs)("select",{id:"recipeId",name:"recipeId",value:w.recipeId,onChange:k,className:"w-full p-2 border rounded-md",children:[(0,l.jsx)("option",{value:"",children:"선택하세요"}),g.map(e=>(0,l.jsx)("option",{value:e.id,children:e.title},e.id))]})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4 pt-6 border-t",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"맛 평가"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{htmlFor:"acidity",className:"block text-sm font-medium mb-1",children:["산미: ",w.acidity,"/10"]}),(0,l.jsx)("input",{type:"range",id:"acidity",name:"acidity",min:"1",max:"10",value:w.acidity,onChange:C,className:"w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{htmlFor:"sweetness",className:"block text-sm font-medium mb-1",children:["단맛: ",w.sweetness,"/10"]}),(0,l.jsx)("input",{type:"range",id:"sweetness",name:"sweetness",min:"1",max:"10",value:w.sweetness,onChange:C,className:"w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{htmlFor:"body",className:"block text-sm font-medium mb-1",children:["바디: ",w.body,"/10"]}),(0,l.jsx)("input",{type:"range",id:"body",name:"body",min:"1",max:"10",value:w.body,onChange:C,className:"w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{htmlFor:"bitterness",className:"block text-sm font-medium mb-1",children:["쓴맛: ",w.bitterness,"/10"]}),(0,l.jsx)("input",{type:"range",id:"bitterness",name:"bitterness",min:"1",max:"10",value:w.bitterness,onChange:C,className:"w-full"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{htmlFor:"overallRating",className:"block text-sm font-medium mb-1",children:["전체 평가: ",w.overallRating,"/5"]}),(0,l.jsx)("input",{type:"range",id:"overallRating",name:"overallRating",min:"1",max:"5",value:w.overallRating,onChange:C,className:"w-full"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"플레이버 휠"}),(0,l.jsx)(i.Z,{selectedLabels:p,onChange:e=>{v(e)}})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4 pt-6 border-t",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"노트 & 코멘트"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium mb-1",children:"추가 노트"}),(0,l.jsx)("textarea",{id:"notes",name:"notes",value:w.notes,onChange:k,rows:4,className:"w-full p-2 border rounded-md",placeholder:"이 커피에 대한 추가 생각이나 느낌을 자유롭게 기록하세요."})]})]}),(0,l.jsx)("div",{className:"pt-6 border-t flex justify-end",children:(0,l.jsxs)("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center",children:[(0,l.jsx)(n.A,{size:16,className:"mr-1"}),b?"저장 중...":"맛 노트 저장하기"]})})]})}},2469:(e,s,a)=>{"use strict";a.d(s,{y:()=>t});var l=a(2935);let t=(0,l.createServerReference)("40dd756df4f8233e05d1907947a699d86659ad0e72",l.callServer,void 0,l.findSourceMapURL,"getBeans")}},e=>{var s=s=>e(e.s=s);e.O(0,[7261,7540,782,3258,587,8315,7358],()=>s(1789)),_N_E=e.O()}]);