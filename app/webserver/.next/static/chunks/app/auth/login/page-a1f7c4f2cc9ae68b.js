(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4859],{1525:(e,r,t)=>{"use strict";t.d(r,{N:()=>i});var s=t(4057),n=t(4338);let a=n.env.NEXT_PUBLIC_SUPABASE_URL||"",o=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";if(!a||!o)throw Error("Supabase URL과 익명 키가 설정되지 않았습니다.");let i=(0,s.createBrowserClient)(a,o)},2359:(e,r,t)=>{Promise.resolve().then(t.bind(t,6071))},2555:(e,r,t)=>{"use strict";t.d(r,{J:()=>o});var s=t(4568),n=t(7620),a=t(3928);let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("label",{ref:r,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...n})});o.displayName="Label"},3928:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var s=t(2987),n=t(607);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,s.$)(r))}},4193:(e,r,t)=>{"use strict";t.d(r,{Bh:()=>l,CI:()=>i,Ru:()=>a,bk:()=>n,cU:()=>o});var s=t(1525);async function n(e,r){let{data:t,error:n}=await s.N.auth.signUp({email:e,password:r});if(n)throw n;return t}async function a(e,r){let{data:t,error:n}=await s.N.auth.signInWithPassword({email:e,password:r});if(n)return n.message.includes("Invalid login credentials")?{success:!1,error:"이메일 또는 비밀번호가 올바르지 않습니다."}:n.message.includes("Email not confirmed")?{success:!1,error:"이메일 인증이 완료되지 않았습니다. 메일함을 확인해주세요."}:n.message.includes("rate limit")?{success:!1,error:"로그인 시도가 너무 많습니다. 잠시 후 다시 시도해주세요."}:{success:!1,error:"로그인 중 오류가 발생했습니다: "+n.message};return{success:!0,data:t}}async function o(e){let{data:r,error:t}=await s.N.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});return t?t.message.includes("popup blocked")?{success:!1,error:"팝업이 차단되었습니다. 팝업 차단을 해제해주세요."}:t.message.includes("canceled")?{success:!1,error:"로그인이 취소되었습니다."}:{success:!1,error:"".concat(e," 로그인 중 오류가 발생했습니다: ")+t.message}:{success:!0,data:r}}async function i(){let{error:e}=await s.N.auth.signOut();if(e)throw e}function l(e){return s.N.auth.onAuthStateChange((r,t)=>{e((null==t?void 0:t.user)||null)})}},4451:(e,r,t)=>{"use strict";t.d(r,{F:()=>D});var s=t(4568),n=t(3809),a=t(2463),o=t(9369),i=t(5870),l=t(7911),c=t(3385),d=t(4508),u=t(9594),m=t(4529),f=t(9966),g=t(7277),h=t(5347),p=t(9721),x=t(7423),v=t(3672),b=t(3793),w=t(5962),j=t(5604),y=t(4931),A=t(2879),C=t(1219),N=t(4642),k=t(5945),R=t(3425),E=t(7130),P=t(2547),z=t(9513),S=t(434),F=t(1893),I=t(3185),_=t(1503),O=t(9457),B=t(2187),L=t(3908),U=t(5918);let D={logo:n.A,close:a.A,spinner:o.A,chevronLeft:i.A,chevronRight:l.A,trash:c.A,settings:d.A,user:u.A,add:m.A,warning:f.A,arrowRight:g.A,help:h.A,pizza:p.A,sun:x.A,moon:v.A,laptop:b.A,gitHub:w.A,twitter:j.A,check:y.A,more:A.A,page:C.A,media:N.A,billing:k.A,ellipsis:A.A,post:R.A,command:E.A,coffee:n.A,temperature:P.A,time:z.A,water:S.A,weight:F.A,star:I.A,heart:_.A,bookmark:O.A,share:B.A,comment:L.A,like:U.A,google:e=>{let{...r}=e;return(0,s.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",...r,children:(0,s.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})})},kakao:e=>{let{...r}=e;return(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:(0,s.jsx)("path",{d:"M12 3C6.477 3 2 6.477 2 10.8C2 13.7083 3.79167 16.2417 6.33333 17.7333L5.58333 21.1C5.54167 21.2667 5.59167 21.4417 5.71667 21.55C5.8 21.6333 5.91667 21.6667 6.03333 21.6667C6.13333 21.6667 6.23333 21.6333 6.31667 21.575L10.175 19.125C10.775 19.2083 11.3833 19.25 12 19.25C17.5229 19.25 22 15.7735 22 11.45C22 7.12649 17.5229 3.65 12 3.65V3ZM7.5 12.5C6.67157 12.5 6 11.8284 6 11C6 10.1716 6.67157 9.5 7.5 9.5C8.32843 9.5 9 10.1716 9 11C9 11.8284 8.32843 12.5 7.5 12.5ZM12 12.5C11.1716 12.5 10.5 11.8284 10.5 11C10.5 10.1716 11.1716 9.5 12 9.5C12.8284 9.5 13.5 10.1716 13.5 11C13.5 11.8284 12.8284 12.5 12 12.5ZM16.5 12.5C15.6716 12.5 15 11.8284 15 11C15 10.1716 15.6716 9.5 16.5 9.5C17.3284 9.5 18 10.1716 18 11C18 11.8284 17.3284 12.5 16.5 12.5Z",fill:"currentColor"})})}}},5165:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(4568),n=t(7620),a=t(3928);let o=n.forwardRef((e,r)=>{let{className:t,type:n,...o}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...o})});o.displayName="Input"},6071:(e,r,t)=>{"use strict";t.d(r,{LoginForm:()=>P});var s=t(4568),n=t(7620),a=t(1938),o=t(60),i=t(2942),l=t(7227),c=t(9649),d=t(3928),u=t(2555);let m=a.Op,f=n.createContext({}),g=e=>{let{...r}=e;return(0,s.jsx)(f.Provider,{value:{name:r.name},children:(0,s.jsx)(a.xI,{...r})})},h=()=>{let e=n.useContext(f),r=n.useContext(p),{getFieldState:t}=(0,a.xW)(),s=(0,a.lN)({name:e.name}),o=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...o}},p=n.createContext({});function x(e){let{className:r,...t}=e,a=n.useId();return(0,s.jsx)(p.Provider,{value:{id:a},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,d.cn)("grid gap-2",r),...t})})}function v(e){let{className:r,...t}=e,{error:n,formItemId:a}=h();return(0,s.jsx)(u.J,{"data-slot":"form-label","data-error":!!n,className:(0,d.cn)("data-[error=true]:text-destructive-foreground",r),htmlFor:a,...t})}function b(e){let{...r}=e,{error:t,formItemId:n,formDescriptionId:a,formMessageId:o}=h();return(0,s.jsx)(c.DX,{"data-slot":"form-control",id:n,"aria-describedby":t?"".concat(a," ").concat(o):"".concat(a),"aria-invalid":!!t,...r})}function w(e){var r;let{className:t,...n}=e,{error:a,formMessageId:o}=h(),i=a?String(null!==(r=null==a?void 0:a.message)&&void 0!==r?r:""):n.children;return i?(0,s.jsx)("p",{"data-slot":"form-message",id:o,className:(0,d.cn)("text-destructive-foreground text-sm",t),...n,children:i}):null}var j=t(5165),y=t(1874),A=t(7261),C=t.n(A),N=t(880);let k=N.z.object({email:N.z.string().email("유효한 이메일 주소를 입력해주세요."),password:N.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다.")});N.z.object({name:N.z.string().min(2,"이름은 최소 2자 이상이어야 합니다."),email:N.z.string().email("유효한 이메일 주소를 입력해주세요."),password:N.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:N.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}).refine(e=>e.password===e.confirmPassword,{message:"비밀번호가 일치하지 않습니다.",path:["confirmPassword"]}),N.z.object({currentPassword:N.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),newPassword:N.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmNewPassword:N.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}).refine(e=>e.newPassword===e.confirmNewPassword,{message:"새 비밀번호가 일치하지 않습니다.",path:["confirmNewPassword"]});var R=t(4193),E=t(4451);function P(){let e=(0,i.useRouter)(),[r,t]=(0,n.useState)(!1),c=(0,a.mN)({resolver:(0,o.u)(k),defaultValues:{email:"",password:""}});async function d(r){t(!0);try{var s,n,a;let t=await (0,R.Ru)(r.email,r.password);if(t.success){if(null===(s=t.data)||void 0===s?void 0:s.user)try{let e=await fetch("/api/users/".concat(t.data.user.id),{method:"GET"});404===e.status&&(await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.data.user.id,name:(null===(n=t.data.user.email)||void 0===n?void 0:n.split("@")[0])||"사용자",email:t.data.user.email})}),console.log("로그인 후 누락된 사용자 프로필 생성 완료"))}catch(e){console.error("사용자 프로필 확인/생성 오류:",e)}e.push("/"),e.refresh(),y.oR.success("로그인되었습니다.")}else y.oR.error(t.error||"로그인에 실패했습니다."),(null===(a=t.error)||void 0===a?void 0:a.includes("이메일 또는 비밀번호가 올바르지 않습니다"))&&(c.setError("email",{message:"이메일 또는 비밀번호를 확인해주세요"}),c.setError("password",{message:"이메일 또는 비밀번호를 확인해주세요"}))}catch(e){console.error("로그인 오류:",e),y.oR.error("로그인 중 예상치 못한 오류가 발생했습니다. 다시 시도해주세요.")}finally{t(!1)}}async function u(e){t(!0);try{let r=await (0,R.cU)(e);r.success&&r.data?r.data.url?window.location.href=r.data.url:(y.oR.error("".concat(e," 로그인 URL을 가져오는데 실패했습니다.")),t(!1)):(y.oR.error(r.error||"".concat(e," 로그인에 실패했습니다.")),t(!1))}catch(r){console.error("".concat(e," 로그인 오류:"),r),y.oR.error("".concat(e," 로그인 중 예상치 못한 오류가 발생했습니다. 다시 시도해주세요.")),t(!1)}}return(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsx)(m,{...c,children:(0,s.jsxs)("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[(0,s.jsx)(g,{control:c.control,name:"email",render:e=>{let{field:r}=e;return(0,s.jsxs)(x,{children:[(0,s.jsx)(v,{children:"이메일"}),(0,s.jsx)(b,{children:(0,s.jsx)(j.p,{placeholder:"name@example.com",...r})}),(0,s.jsx)(w,{})]})}}),(0,s.jsx)(g,{control:c.control,name:"password",render:e=>{let{field:r}=e;return(0,s.jsxs)(x,{children:[(0,s.jsx)(v,{children:"비밀번호"}),(0,s.jsx)(b,{children:(0,s.jsx)(j.p,{type:"password",placeholder:"••••••••",...r})}),(0,s.jsx)(w,{})]})}}),(0,s.jsx)(l.$,{type:"submit",className:"w-full",disabled:r,children:r?"로그인 중...":"로그인"})]})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("span",{className:"w-full border-t"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"또는 소셜 로그인"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)(l.$,{variant:"outline",type:"button",disabled:r,onClick:()=>u("kakao"),className:"bg-[#FEE500] text-black hover:bg-[#FDD835] hover:text-black",children:[(0,s.jsx)(E.F.kakao,{className:"mr-2 h-4 w-4"}),"카카오"]}),(0,s.jsxs)(l.$,{variant:"outline",type:"button",disabled:r,onClick:()=>u("google"),children:[(0,s.jsx)(E.F.google,{className:"mr-2 h-4 w-4"}),"Google"]})]}),(0,s.jsxs)("div",{className:"text-center text-sm",children:["계정이 없으신가요?"," ",(0,s.jsx)(C(),{href:"/auth/register",className:"underline",children:"회원가입"})]})]})}},7227:(e,r,t)=>{"use strict";t.d(r,{$:()=>l});var s=t(4568),n=t(7620),a=t(4908),o=t(3928);let i=(0,a.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,r)=>{let{className:t,variant:n,size:a,asChild:l=!1,...c}=e;return(0,s.jsx)("button",{className:(0,o.cn)(i({variant:n,size:a,className:t})),ref:r,...c})});l.displayName="Button"},9640:(e,r,t)=>{"use strict";t.d(r,{s:()=>o,t:()=>a});var s=t(7620);function n(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function a(...e){return r=>{let t=!1,s=e.map(e=>{let s=n(e,r);return t||"function"!=typeof s||(t=!0),s});if(t)return()=>{for(let r=0;r<s.length;r++){let t=s[r];"function"==typeof t?t():n(e[r],null)}}}}function o(...e){return s.useCallback(a(...e),e)}},9649:(e,r,t)=>{"use strict";t.d(r,{DX:()=>o});var s=t(7620),n=t(9640),a=t(4568),o=s.forwardRef((e,r)=>{let{children:t,...n}=e,o=s.Children.toArray(t),l=o.find(c);if(l){let e=l.props.children,t=o.map(r=>r!==l?r:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,a.jsx)(i,{...n,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,t):null})}return(0,a.jsx)(i,{...n,ref:r,children:t})});o.displayName="Slot";var i=s.forwardRef((e,r)=>{let{children:t,...a}=e;if(s.isValidElement(t)){let e=function(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t),o=function(e,r){let t={...r};for(let s in r){let n=e[s],a=r[s];/^on[A-Z]/.test(s)?n&&a?t[s]=(...e)=>{a(...e),n(...e)}:n&&(t[s]=n):"style"===s?t[s]={...n,...a}:"className"===s&&(t[s]=[n,a].filter(Boolean).join(" "))}return{...e,...t}}(a,t.props);return t.type!==s.Fragment&&(o.ref=r?(0,n.t)(r,e):e),s.cloneElement(t,o)}return s.Children.count(t)>1?s.Children.only(null):null});i.displayName="SlotClone";var l=({children:e})=>(0,a.jsx)(a.Fragment,{children:e});function c(e){return s.isValidElement(e)&&e.type===l}}},e=>{var r=r=>e(e.s=r);e.O(0,[7261,7540,4239,1874,4057,8481,587,8315,7358],()=>r(2359)),_N_E=e.O()}]);