(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{14:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>u});var r=s(7620);let a=0,i=new Map,o=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=n(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},95:(e,t,s)=>{"use strict";s.d(t,{RegisterForm:()=>h});var r=s(4568),a=s(7620),i=s(1938),o=s(60),n=s(880),l=s(7227),c=s(5165),d=s(2555),u=s(4451),m=s(14),p=s(2942),g=s(4193);let f=n.z.object({name:n.z.string().min(2,{message:"이름은 2자 이상이어야 합니다."}),email:n.z.string().email({message:"유효한 이메일 주소를 입력해주세요."}),password:n.z.string().min(8,{message:"비밀번호는 8자 이상이어야 합니다."})});function h(){let[e,t]=(0,a.useState)(!1),s=(0,p.useRouter)(),{register:n,handleSubmit:h,formState:{errors:v}}=(0,i.mN)({resolver:(0,o.u)(f),defaultValues:{name:"",email:"",password:""}}),x=async e=>{t(!0);try{let{user:t}=await (0,g.bk)(e.email,e.password);if(t){try{let s=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,name:e.name,email:e.email})});if(!s.ok){let e=await s.json();401===s.status?console.warn("사용자 프로필 저장 401 오류: 회원가입은 성공했으나 프로필 저장에 실패했습니다"):409===s.status?console.warn("사용자 프로필 저장 409 오류: 이미 존재하는 사용자입니다"):console.error("사용자 프로필 저장 오류:",e.error)}}catch(e){console.error("사용자 프로필 저장 오류:",e)}(0,m.oR)({title:"성공",description:"회원가입이 완료되었습니다! 이메일 인증을 확인해주세요."}),setTimeout(()=>{s.push("/auth/login")},1500)}}catch(t){console.error("Register error:",t);let e="회원가입 중 오류가 발생했습니다.";t instanceof Error&&t.message.includes("email already exists")&&(e="이미 등록된 이메일입니다. 다른 이메일을 사용하거나 로그인해 주세요."),(0,m.oR)({title:"오류",description:e,variant:"destructive"})}finally{t(!1)}},b=async e=>{t(!0);try{await (0,g.cU)(e)}catch(s){console.error("".concat(e," 로그인 오류:"),s),(0,m.oR)({title:"오류",description:"".concat(e," 로그인에 실패했습니다. 다시 시도해주세요."),variant:"destructive"}),t(!1)}};return(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsx)("form",{onSubmit:h(x),children:(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(d.J,{htmlFor:"name",children:"이름"}),(0,r.jsx)(c.p,{id:"name",placeholder:"홍길동",type:"text",autoCapitalize:"none",autoComplete:"name",autoCorrect:"off",disabled:e,...n("name")}),(null==v?void 0:v.name)&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:v.name.message})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(d.J,{htmlFor:"email",children:"이메일"}),(0,r.jsx)(c.p,{id:"email",placeholder:"name@example.com",type:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",disabled:e,...n("email")}),(null==v?void 0:v.email)&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:v.email.message})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(d.J,{htmlFor:"password",children:"비밀번호"}),(0,r.jsx)(c.p,{id:"password",placeholder:"********",type:"password",autoCapitalize:"none",autoComplete:"new-password",disabled:e,...n("password")}),(null==v?void 0:v.password)&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:v.password.message})]}),(0,r.jsxs)(l.$,{disabled:e,children:[e&&(0,r.jsx)(u.F.spinner,{className:"mr-2 h-4 w-4 animate-spin"}),"회원가입"]})]})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"또는 소셜 계정으로 계속하기"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)(l.$,{variant:"outline",type:"button",disabled:e,onClick:()=>b("kakao"),className:"bg-[#FEE500] text-black hover:bg-[#FDD835] hover:text-black",children:[(0,r.jsx)(u.F.kakao,{className:"mr-2 h-4 w-4"}),"카카오"]}),(0,r.jsxs)(l.$,{variant:"outline",type:"button",disabled:e,onClick:()=>b("google"),children:[(0,r.jsx)(u.F.google,{className:"mr-2 h-4 w-4"}),"Google"]})]})]})}},1525:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});var r=s(4057),a=s(4338);let i=a.env.NEXT_PUBLIC_SUPABASE_URL||"",o=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";if(!i||!o)throw Error("Supabase URL과 익명 키가 설정되지 않았습니다.");let n=(0,r.createBrowserClient)(i,o)},2555:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(4568),a=s(7620),i=s(3928);let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("label",{ref:t,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...a})});o.displayName="Label"},3928:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2987),a=s(607);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},4193:(e,t,s)=>{"use strict";s.d(t,{Bh:()=>l,CI:()=>n,Ru:()=>i,bk:()=>a,cU:()=>o});var r=s(1525);async function a(e,t){let{data:s,error:a}=await r.N.auth.signUp({email:e,password:t});if(a)throw a;return s}async function i(e,t){let{data:s,error:a}=await r.N.auth.signInWithPassword({email:e,password:t});if(a)return a.message.includes("Invalid login credentials")?{success:!1,error:"이메일 또는 비밀번호가 올바르지 않습니다."}:a.message.includes("Email not confirmed")?{success:!1,error:"이메일 인증이 완료되지 않았습니다. 메일함을 확인해주세요."}:a.message.includes("rate limit")?{success:!1,error:"로그인 시도가 너무 많습니다. 잠시 후 다시 시도해주세요."}:{success:!1,error:"로그인 중 오류가 발생했습니다: "+a.message};return{success:!0,data:s}}async function o(e){let{data:t,error:s}=await r.N.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});return s?s.message.includes("popup blocked")?{success:!1,error:"팝업이 차단되었습니다. 팝업 차단을 해제해주세요."}:s.message.includes("canceled")?{success:!1,error:"로그인이 취소되었습니다."}:{success:!1,error:"".concat(e," 로그인 중 오류가 발생했습니다: ")+s.message}:{success:!0,data:t}}async function n(){let{error:e}=await r.N.auth.signOut();if(e)throw e}function l(e){return r.N.auth.onAuthStateChange((t,s)=>{e((null==s?void 0:s.user)||null)})}},4451:(e,t,s)=>{"use strict";s.d(t,{F:()=>U});var r=s(4568),a=s(3809),i=s(2463),o=s(9369),n=s(5870),l=s(7911),c=s(3385),d=s(4508),u=s(9594),m=s(4529),p=s(9966),g=s(7277),f=s(5347),h=s(9721),v=s(7423),x=s(3672),b=s(3793),A=s(5962),w=s(5604),y=s(4931),C=s(2879),N=s(1219),j=s(4642),S=s(5945),k=s(3425),T=s(7130),E=s(2547),_=s(9513),O=s(434),I=s(1893),R=s(3185),z=s(1503),F=s(9457),M=s(2187),D=s(3908),P=s(5918);let U={logo:a.A,close:i.A,spinner:o.A,chevronLeft:n.A,chevronRight:l.A,trash:c.A,settings:d.A,user:u.A,add:m.A,warning:p.A,arrowRight:g.A,help:f.A,pizza:h.A,sun:v.A,moon:x.A,laptop:b.A,gitHub:A.A,twitter:w.A,check:y.A,more:C.A,page:N.A,media:j.A,billing:S.A,ellipsis:C.A,post:k.A,command:T.A,coffee:a.A,temperature:E.A,time:_.A,water:O.A,weight:I.A,star:R.A,heart:z.A,bookmark:F.A,share:M.A,comment:D.A,like:P.A,google:e=>{let{...t}=e;return(0,r.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",...t,children:(0,r.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})})},kakao:e=>{let{...t}=e;return(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:(0,r.jsx)("path",{d:"M12 3C6.477 3 2 6.477 2 10.8C2 13.7083 3.79167 16.2417 6.33333 17.7333L5.58333 21.1C5.54167 21.2667 5.59167 21.4417 5.71667 21.55C5.8 21.6333 5.91667 21.6667 6.03333 21.6667C6.13333 21.6667 6.23333 21.6333 6.31667 21.575L10.175 19.125C10.775 19.2083 11.3833 19.25 12 19.25C17.5229 19.25 22 15.7735 22 11.45C22 7.12649 17.5229 3.65 12 3.65V3ZM7.5 12.5C6.67157 12.5 6 11.8284 6 11C6 10.1716 6.67157 9.5 7.5 9.5C8.32843 9.5 9 10.1716 9 11C9 11.8284 8.32843 12.5 7.5 12.5ZM12 12.5C11.1716 12.5 10.5 11.8284 10.5 11C10.5 10.1716 11.1716 9.5 12 9.5C12.8284 9.5 13.5 10.1716 13.5 11C13.5 11.8284 12.8284 12.5 12 12.5ZM16.5 12.5C15.6716 12.5 15 11.8284 15 11C15 10.1716 15.6716 9.5 16.5 9.5C17.3284 9.5 18 10.1716 18 11C18 11.8284 17.3284 12.5 16.5 12.5Z",fill:"currentColor"})})}}},5165:(e,t,s)=>{"use strict";s.d(t,{p:()=>o});var r=s(4568),a=s(7620),i=s(3928);let o=a.forwardRef((e,t)=>{let{className:s,type:a,...o}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...o})});o.displayName="Input"},7227:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(4568),a=s(7620),i=s(4908),o=s(3928);let n=(0,i.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:l=!1,...c}=e;return(0,r.jsx)("button",{className:(0,o.cn)(n({variant:a,size:i,className:s})),ref:t,...c})});l.displayName="Button"},8427:(e,t,s)=>{Promise.resolve().then(s.bind(s,95)),Promise.resolve().then(s.t.bind(s,7261,23))}},e=>{var t=t=>e(e.s=t);e.O(0,[7261,7540,4239,4057,8481,587,8315,7358],()=>t(8427)),_N_E=e.O()}]);