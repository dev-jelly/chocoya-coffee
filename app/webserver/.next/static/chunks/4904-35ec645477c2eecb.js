(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4904],{14:(e,s,t)=>{"use strict";t.d(s,{dj:()=>u,oR:()=>m});var i=t(7620);let r=0,a=new Map,n=e=>{if(a.has(e))return;let s=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,s)},d=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},l=[],o={toasts:[]};function c(e){o=d(o,e),l.forEach(e=>{e(o)})}function m(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||i()}}}),{id:t,dismiss:i,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,s]=i.useState(o);return i.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},2555:(e,s,t)=>{"use strict";t.d(s,{J:()=>n});var i=t(4568),r=t(7620),a=t(3928);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,i.jsx)("label",{ref:s,className:(0,a.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...r})});n.displayName="Label"},3928:(e,s,t)=>{"use strict";t.d(s,{cn:()=>a});var i=t(2987),r=t(607);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,i.$)(s))}},4904:(e,s,t)=>{Promise.resolve().then(t.bind(t,4998)),Promise.resolve().then(t.t.bind(t,7261,23))},4998:(e,s,t)=>{"use strict";t.d(s,{GrinderForm:()=>I});var i=t(4568),r=t(7620),a=t(2942),n=t(1938),d=t(60),l=t(880),o=t(3164),c=t(8262),m=t(9369),u=t(2935);let p=(0,u.createServerReference)("609040d7801287eee927927e2a7433f58bda2cc5a0",u.callServer,void 0,u.findSourceMapURL,"updateGrinder"),x=(0,u.createServerReference)("4057da01a1dedce3831aa62d6027cb70fc05ab7149",u.callServer,void 0,u.findSourceMapURL,"createGrinder");var h=t(7227),f=t(5165),g=t(3928);let v=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,i.jsx)("textarea",{className:(0,g.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});function j(e){let{className:s,...t}=e;return(0,i.jsx)("div",{"data-slot":"card",className:(0,g.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function b(e){let{className:s,...t}=e;return(0,i.jsx)("div",{"data-slot":"card-content",className:(0,g.cn)("px-6",s),...t})}function y(e){let{className:s,...t}=e;return(0,i.jsx)("div",{"data-slot":"card-footer",className:(0,g.cn)("flex items-center px-6",s),...t})}v.displayName="Textarea";var N=t(2555),w=t(9522),k=t(4711),_=t(6430),S=t(4931);let z=w.bL;w.YJ;let T=w.WT,A=r.forwardRef((e,s)=>{let{className:t,children:r,...a}=e;return(0,i.jsxs)(w.l9,{ref:s,className:(0,g.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[r,(0,i.jsx)(w.In,{asChild:!0,children:(0,i.jsx)(k.A,{className:"h-4 w-4 opacity-50"})})]})});A.displayName=w.l9.displayName;let F=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,i.jsx)(w.PP,{ref:s,className:(0,g.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,i.jsx)(_.A,{className:"h-4 w-4"})})});F.displayName=w.PP.displayName;let R=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,i.jsx)(w.wn,{ref:s,className:(0,g.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,i.jsx)(k.A,{className:"h-4 w-4"})})});R.displayName=w.wn.displayName;let J=r.forwardRef((e,s)=>{let{className:t,children:r,position:a="popper",...n}=e;return(0,i.jsx)(w.ZL,{children:(0,i.jsxs)(w.UC,{ref:s,className:(0,g.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...n,children:[(0,i.jsx)(F,{}),(0,i.jsx)(w.LM,{className:(0,g.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,i.jsx)(R,{})]})})});J.displayName=w.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,i.jsx)(w.JU,{ref:s,className:(0,g.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=w.JU.displayName;let M=r.forwardRef((e,s)=>{let{className:t,children:r,...a}=e;return(0,i.jsxs)(w.q7,{ref:s,className:(0,g.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(w.VF,{children:(0,i.jsx)(S.A,{className:"h-4 w-4"})})}),(0,i.jsx)(w.p4,{children:r})]})});M.displayName=w.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,i.jsx)(w.wv,{ref:s,className:(0,g.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=w.wv.displayName;var U=t(14);let E=l.z.object({id:l.z.string().optional(),name:l.z.string().min(1,"이름을 입력해주세요"),name_ko:l.z.string().min(1,"한글 이름을 입력해주세요"),brand:l.z.string().min(1,"브랜드를 입력해주세요"),type:l.z.string().min(1,"타입을 선택해주세요"),burr:l.z.string().optional(),burrSize:l.z.string().optional(),adjustmentType:l.z.string().min(1,"조절 방식을 선택해주세요"),description:l.z.string().optional(),description_ko:l.z.string().optional(),imageUrl:l.z.string().optional(),settings:l.z.array(l.z.object({id:l.z.string().optional(),name:l.z.string().min(1,"설정 이름을 입력해주세요"),name_ko:l.z.string().min(1,"설정 한글 이름을 입력해주세요"),value:l.z.string().min(1,"설정 값을 입력해주세요"),brewingMethod:l.z.string().min(1,"브루잉 방식을 선택해주세요"),description:l.z.string().optional(),description_ko:l.z.string().optional()})).optional()});function I(e){var s;let{grinder:t}=e,l=(0,a.useRouter)(),{toast:u}=(0,U.dj)(),[g,w]=(0,r.useState)(!1),k=t?{id:t.id,name:t.name||"",name_ko:t.name_ko||"",brand:t.brand||"",type:t.type||"",burr:t.burr||"",burrSize:t.burrSize||"",adjustmentType:t.adjustmentType||"",description:t.description||"",description_ko:t.description_ko||"",imageUrl:t.imageUrl||"",settings:(null===(s=t.settings)||void 0===s?void 0:s.map(e=>({id:e.id,name:e.name,name_ko:e.name_ko||"",value:e.value,brewingMethod:e.brewingMethod,description:e.description||"",description_ko:e.description_ko||""})))||[]}:{name:"",name_ko:"",brand:"",type:"",burr:"",burrSize:"",adjustmentType:"",description:"",description_ko:"",imageUrl:"",settings:[]},{register:_,handleSubmit:S,control:F,formState:{errors:R}}=(0,n.mN)({resolver:(0,d.u)(E),defaultValues:k}),{fields:I,append:O,remove:C}=(0,n.jz)({control:F,name:"settings"}),D=async e=>{w(!0);try{let s={...e,settings:e.settings||[]},i=(null==t?void 0:t.id)?await p(t.id,s):await x(s);i.success?(u({title:"성공",description:t?"그라인더가 수정되었습니다.":"새 그라인더가 추가되었습니다."}),l.push("/admin/grinders")):u({title:"오류",description:i.error||"작업 중 오류가 발생했습니다.",variant:"destructive"})}catch(e){console.error("Form submission error:",e),u({title:"오류",description:"요청 처리 중 오류가 발생했습니다.",variant:"destructive"})}finally{w(!1)}};return(0,i.jsxs)("form",{onSubmit:S(D),className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"기본 정보"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"name",children:"이름 (영문)"}),(0,i.jsx)(f.p,{id:"name",..._("name")}),R.name&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:R.name.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"name_ko",children:"이름 (한글)"}),(0,i.jsx)(f.p,{id:"name_ko",..._("name_ko")}),R.name_ko&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:R.name_ko.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"brand",children:"브랜드"}),(0,i.jsx)(f.p,{id:"brand",..._("brand")}),R.brand&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:R.brand.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"type",children:"타입"}),(0,i.jsxs)(z,{..._("type"),defaultValue:k.type,children:[(0,i.jsx)(A,{children:(0,i.jsx)(T,{placeholder:"타입 선택"})}),(0,i.jsxs)(J,{children:[(0,i.jsx)(M,{value:"manual",children:"수동"}),(0,i.jsx)(M,{value:"electric",children:"전동"}),(0,i.jsx)(M,{value:"commercial",children:"상업용"})]})]}),R.type&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:R.type.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"adjustmentType",children:"조절 방식"}),(0,i.jsxs)(z,{..._("adjustmentType"),defaultValue:k.adjustmentType,children:[(0,i.jsx)(A,{children:(0,i.jsx)(T,{placeholder:"조절 방식 선택"})}),(0,i.jsxs)(J,{children:[(0,i.jsx)(M,{value:"stepped",children:"스텝형"}),(0,i.jsx)(M,{value:"stepless",children:"무단계형"}),(0,i.jsx)(M,{value:"hybrid",children:"하이브리드"})]})]}),R.adjustmentType&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:R.adjustmentType.message})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"추가 정보"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"burr",children:"날 종류"}),(0,i.jsx)(f.p,{id:"burr",..._("burr")})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"burrSize",children:"날 크기"}),(0,i.jsx)(f.p,{id:"burrSize",..._("burrSize")})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"imageUrl",children:"이미지 URL"}),(0,i.jsx)(f.p,{id:"imageUrl",..._("imageUrl")})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"description",children:"설명 (영문)"}),(0,i.jsx)(v,{id:"description",..._("description"),rows:3})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"description_ko",children:"설명 (한글)"}),(0,i.jsx)(v,{id:"description_ko",..._("description_ko"),rows:3})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"그라인더 설정"}),(0,i.jsxs)(h.$,{type:"button",variant:"outline",size:"sm",onClick:()=>O({name:"",name_ko:"",value:"",brewingMethod:"",description:"",description_ko:""}),children:[(0,i.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"설정 추가"]})]}),0===I.length&&(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"그라인더 설정을 추가하세요."}),I.map((e,s)=>{var t,r,a,n,d,l,o,m,u,p,x,g,w,k,S,F;return(0,i.jsxs)(j,{className:"relative",children:[(0,i.jsx)(b,{className:"pt-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"settings.".concat(s,".name"),children:"설정 이름 (영문)"}),(0,i.jsx)(f.p,{id:"settings.".concat(s,".name"),..._("settings.".concat(s,".name"))}),(null===(r=R.settings)||void 0===r?void 0:null===(t=r[s])||void 0===t?void 0:t.name)&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:null===(n=R.settings[s])||void 0===n?void 0:null===(a=n.name)||void 0===a?void 0:a.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"settings.".concat(s,".name_ko"),children:"설정 이름 (한글)"}),(0,i.jsx)(f.p,{id:"settings.".concat(s,".name_ko"),..._("settings.".concat(s,".name_ko"))}),(null===(l=R.settings)||void 0===l?void 0:null===(d=l[s])||void 0===d?void 0:d.name_ko)&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:null===(m=R.settings[s])||void 0===m?void 0:null===(o=m.name_ko)||void 0===o?void 0:o.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"settings.".concat(s,".value"),children:"설정 값"}),(0,i.jsx)(f.p,{id:"settings.".concat(s,".value"),..._("settings.".concat(s,".value"))}),(null===(p=R.settings)||void 0===p?void 0:null===(u=p[s])||void 0===u?void 0:u.value)&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:null===(g=R.settings[s])||void 0===g?void 0:null===(x=g.value)||void 0===x?void 0:x.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"settings.".concat(s,".brewingMethod"),children:"브루잉 방식"}),(0,i.jsxs)(z,{..._("settings.".concat(s,".brewingMethod")),defaultValue:e.brewingMethod,children:[(0,i.jsx)(A,{children:(0,i.jsx)(T,{placeholder:"브루잉 방식 선택"})}),(0,i.jsxs)(J,{children:[(0,i.jsx)(M,{value:"푸어오버",children:"푸어오버"}),(0,i.jsx)(M,{value:"에스프레소",children:"에스프레소"}),(0,i.jsx)(M,{value:"프렌치프레스",children:"프렌치프레스"}),(0,i.jsx)(M,{value:"에어로프레스",children:"에어로프레스"}),(0,i.jsx)(M,{value:"모카포트",children:"모카포트"}),(0,i.jsx)(M,{value:"콜드브루",children:"콜드브루"})]})]}),(null===(k=R.settings)||void 0===k?void 0:null===(w=k[s])||void 0===w?void 0:w.brewingMethod)&&(0,i.jsx)("p",{className:"text-sm text-red-500",children:null===(F=R.settings[s])||void 0===F?void 0:null===(S=F.brewingMethod)||void 0===S?void 0:S.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"settings.".concat(s,".description"),children:"설명 (영문)"}),(0,i.jsx)(v,{id:"settings.".concat(s,".description"),..._("settings.".concat(s,".description")),rows:2})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(N.J,{htmlFor:"settings.".concat(s,".description_ko"),children:"설명 (한글)"}),(0,i.jsx)(v,{id:"settings.".concat(s,".description_ko"),..._("settings.".concat(s,".description_ko")),rows:2})]})]})}),(0,i.jsx)(y,{className:"flex justify-end",children:(0,i.jsxs)(h.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(s),children:[(0,i.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"삭제"]})})]},e.id)})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,i.jsx)(h.$,{type:"button",variant:"outline",onClick:()=>l.push("/admin/grinders"),children:"취소"}),(0,i.jsxs)(h.$,{type:"submit",disabled:g,children:[g&&(0,i.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),t?"수정하기":"추가하기"]})]})]})}},5165:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var i=t(4568),r=t(7620),a=t(3928);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,i.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},7227:(e,s,t)=>{"use strict";t.d(s,{$:()=>l});var i=t(4568),r=t(7620),a=t(4908),n=t(3928);let d=(0,a.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,s)=>{let{className:t,variant:r,size:a,asChild:l=!1,...o}=e;return(0,i.jsx)("button",{className:(0,n.cn)(d({variant:r,size:a,className:t})),ref:s,...o})});l.displayName="Button"}}]);